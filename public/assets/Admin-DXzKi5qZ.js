var Ne=Object.defineProperty,Re=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Se=(i,t,r)=>t in i?Ne(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Q=(i,t)=>{for(var r in t||(t={}))Oe.call(t,r)&&Se(i,r,t[r]);if(Ue)for(var r of Ue(t))He.call(t,r)&&Se(i,r,t[r]);return i},ae=(i,t)=>Re(i,Fe(t));var T=(i,t,r)=>new Promise((M,s)=>{var u=c=>{try{n(r.next(c))}catch(g){s(g)}},P=c=>{try{n(r.throw(c))}catch(g){s(g)}},n=c=>c.done?M(c.value):Promise.resolve(c.value).then(u,P);n((r=r.apply(i,t)).next())});import{_ as Y,c as o,b as a,f as e,t as d,A as re,r as $,o as ne,d as I,k as C,v as W,m as $e,F as R,e as F,i as de,w as Ve,B as ie,s as E,y as ce,h as ye,g as K,C as oe,z as we,q,D as Ae,j as Pe,E as Le,G as Ge,a as je,l as qe,T as Je,H as Qe,I as Xe,J as Ye}from"./index-DtMsVt7i.js";import{g as xe,m as Ze,w as et,t as tt,u as st,n as lt,o as nt,c as Te,k as at,p as Ie,x as Be,f as ot,z as it,A as rt,B as _e,C as dt,D as ut,E as ct,F as vt,i as be,b as pt,G as mt,H as ft,I as ht,J as gt,K as bt,L as kt,M as We,N as Me,O as yt,P as wt,Q as _t,R as Ct,S as $t,T as Mt,U as xt}from"./urlNormalizer-BBFgLYjs.js";const Tt={class:"welcome-page"},Ut={class:"welcome-title"},St={class:"welcome-cards"},Vt={class:"welcome-card"},At={class:"welcome-value"},It={class:"welcome-card"},Bt={class:"welcome-value"},Dt={__name:"WelcomePage",props:{lastLoginTime:String,lastLoginIp:String,currentUsername:String},setup(i){return(t,r)=>(a(),o("div",Tt,[e("h2",Ut,"æ¬¢è¿æ‚¨ï¼Œ"+d(i.currentUsername||"admin")+"ï¼",1),e("div",St,[e("div",Vt,[r[0]||(r[0]=re('<div class="welcome-icon time-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 6v6l4 2" stroke="#1abc9c" stroke-width="2" stroke-linecap="round" data-v-5cc4f846></path></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•æ—¶é—´</div>',2)),e("div",At,d(i.lastLoginTime||"--"),1)]),e("div",It,[r[1]||(r[1]=re('<div class="welcome-icon ip-icon" data-v-5cc4f846><svg width="32" height="32" viewBox="0 0 24 24" fill="none" data-v-5cc4f846><circle cx="12" cy="12" r="10" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></circle><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z" stroke="#1abc9c" stroke-width="2" data-v-5cc4f846></path><circle cx="12" cy="12" r="2" fill="#1abc9c" data-v-5cc4f846></circle></svg></div><div class="welcome-label" data-v-5cc4f846>ä¸Šæ¬¡ç™»å½•IP</div>',2)),e("div",Bt,d(i.lastLoginIp||"--"),1)])])]))}},Pt=Y(Dt,[["__scopeId","data-v-5cc4f846"]]),Lt={class:"menu-manage"},Wt={key:0,class:"loading-overlay"},zt={class:"menu-header"},Et={class:"menu-add"},Kt=["disabled"],Nt={class:"menu-content"},Rt={key:0,class:"empty-state"},Ft={class:"menu-card-header"},Ot={class:"menu-title"},Ht={class:"menu-name"},Gt={class:"menu-order"},jt={class:"menu-actions"},qt=["onClick"],Jt=["onClick"],Qt=["onClick"],Xt={key:0,class:"sub-menu-list"},Yt={class:"sub-menu-name"},Zt={class:"sub-menu-order"},es={class:"sub-menu-actions"},ts=["onClick"],ss=["onClick"],ls={key:1,class:"no-sub-menu"},ns={key:1,class:"modal-overlay"},as={class:"modal"},os={class:"modal-header"},is={class:"modal-body"},rs={class:"form-group"},ds={class:"form-group"},us={class:"modal-footer"},cs=["disabled"],vs={key:2,class:"modal-overlay"},ps={class:"modal"},ms={class:"modal-header"},fs={class:"modal-body"},hs={class:"form-group"},gs={class:"form-group"},bs={class:"modal-footer"},ks=["disabled"],ys={key:3,class:"modal-overlay"},ws={class:"modal"},_s={class:"modal-body"},Cs={class:"form-group"},$s={class:"form-group"},Ms={class:"modal-footer"},xs=["disabled"],Ts={__name:"MenuManage",setup(i){const t=$([]),r=$(!1),M=$("åŠ è½½ä¸­..."),s=$(""),u=$(!1),P=$(null),n=$({name:"",order:0}),c=$(!1),g=$(null),_=$(""),k=$({name:"",order:0}),S=$(!1),b=$(null),m=$({name:"",order:0});ne(()=>{v()});function f(){try{window.dispatchEvent(new CustomEvent("nav-menus-updated")),console.log("[æ ç›®ç®¡ç†] å·²é€šçŸ¥æ‰©å±•åˆ·æ–°å³é”®èœå•")}catch(z){console.warn("[æ ç›®ç®¡ç†] é€šçŸ¥æ‰©å±•å¤±è´¥:",z)}}function v(z=!1){return T(this,null,function*(){var w,B;r.value=!0,M.value="åŠ è½½ä¸­...";try{const D=yield xe(!0);t.value=D.data||[],z&&f()}catch(D){alert("åŠ è½½å¤±è´¥: "+(((B=(w=D.response)==null?void 0:w.data)==null?void 0:B.error)||D.message))}finally{r.value=!1}})}function A(){return T(this,null,function*(){var z,w;if(s.value.trim()){r.value=!0,M.value="æ·»åŠ ä¸­...";try{const B=t.value.length?Math.max(...t.value.map(D=>D.order||0)):0;yield Ze({name:s.value.trim(),order:B+1}),s.value="",yield v(!0)}catch(B){alert("æ·»åŠ å¤±è´¥: "+(((w=(z=B.response)==null?void 0:z.data)==null?void 0:w.error)||B.message)),r.value=!1}}})}function U(z){P.value=z,n.value={name:z.name,order:z.order},u.value=!0}function V(){return T(this,null,function*(){var D,h;if(!n.value.name.trim()||!P.value)return;const z=P.value.id,w=n.value.name.trim(),B=n.value.order;N(),r.value=!0,M.value="ä¿å­˜ä¸­...";try{yield st(z,{name:w,order:B}),yield v(!0)}catch(p){alert("ä¿å­˜å¤±è´¥: "+(((h=(D=p.response)==null?void 0:D.data)==null?void 0:h.error)||p.message)),r.value=!1}})}function H(z){return T(this,null,function*(){var w,B;if(confirm(`ç¡®å®šåˆ é™¤ä¸»èœå•ã€Œ${z.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å­èœå•å’Œå¡ç‰‡ï¼`)){r.value=!0,M.value="åˆ é™¤ä¸­...";try{yield et(z.id),yield v(!0)}catch(D){alert("åˆ é™¤å¤±è´¥: "+(((B=(w=D.response)==null?void 0:w.data)==null?void 0:B.error)||D.message)),r.value=!1}}})}function X(z){g.value=z.id,_.value=z.name;const w=z.subMenus||[],B=w.length?Math.max(...w.map(D=>D.order||0)):0;k.value={name:"",order:B+1},c.value=!0}function ee(){return T(this,null,function*(){var D,h;if(!k.value.name.trim()||!g.value)return;const z=g.value,w=k.value.name.trim(),B=k.value.order;N(),r.value=!0,M.value="æ·»åŠ ä¸­...";try{yield lt(z,{name:w,order:B}),yield v(!0)}catch(p){alert("æ·»åŠ å¤±è´¥: "+(((h=(D=p.response)==null?void 0:D.data)==null?void 0:h.error)||p.message)),r.value=!1}})}function te(z,w){b.value=w,m.value={name:w.name,order:w.order},S.value=!0}function le(){return T(this,null,function*(){var D,h;if(!m.value.name.trim()||!b.value)return;const z=b.value.id,w=m.value.name.trim(),B=m.value.order;N(),r.value=!0,M.value="ä¿å­˜ä¸­...";try{yield nt(z,{name:w,order:B}),yield v(!0)}catch(p){alert("ä¿å­˜å¤±è´¥: "+(((h=(D=p.response)==null?void 0:D.data)==null?void 0:h.error)||p.message)),r.value=!1}})}function se(z){return T(this,null,function*(){var w,B;if(confirm(`ç¡®å®šåˆ é™¤å­èœå•ã€Œ${z.name}ã€å—ï¼Ÿ
å°†åŒæ—¶åˆ é™¤å…¶ä¸‹æ‰€æœ‰å¡ç‰‡ï¼`)){r.value=!0,M.value="åˆ é™¤ä¸­...";try{yield tt(z.id),yield v(!0)}catch(D){alert("åˆ é™¤å¤±è´¥: "+(((B=(w=D.response)==null?void 0:w.data)==null?void 0:B.error)||D.message)),r.value=!1}}})}function N(){u.value=!1,c.value=!1,S.value=!1,P.value=null,b.value=null}return(z,w)=>(a(),o("div",Lt,[r.value?(a(),o("div",Wt,[w[7]||(w[7]=e("div",{class:"loading-spinner"},null,-1)),e("span",null,d(M.value),1)])):I("",!0),e("div",zt,[w[8]||(w[8]=e("h2",{class:"page-title"},"æ ç›®ç®¡ç†",-1)),e("div",Et,[C(e("input",{"onUpdate:modelValue":w[0]||(w[0]=B=>s.value=B),placeholder:"è¾“å…¥ä¸»èœå•åç§°",class:"input",onKeyup:$e(A,["enter"])},null,544),[[W,s.value]]),e("button",{class:"btn btn-primary",onClick:A,disabled:r.value||!s.value.trim()}," + æ·»åŠ ä¸»èœå• ",8,Kt)])]),e("div",Nt,[t.value.length===0?(a(),o("div",Rt,[...w[9]||(w[9]=[e("p",null,"æš‚æ— èœå•ï¼Œè¯·æ·»åŠ ç¬¬ä¸€ä¸ªä¸»èœå•",-1)])])):I("",!0),(a(!0),o(R,null,F(t.value,B=>(a(),o("div",{key:B.id,class:"menu-card"},[e("div",Ft,[e("div",Ot,[e("span",Ht,d(B.name),1),e("span",Gt,"æ’åº: "+d(B.order),1)]),e("div",jt,[e("button",{class:"btn-icon btn-edit",onClick:D=>U(B),title:"ç¼–è¾‘"},[...w[10]||(w[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,qt),e("button",{class:"btn-icon btn-add",onClick:D=>X(B),title:"æ·»åŠ å­èœå•"},[...w[11]||(w[11]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1)])],8,Jt),e("button",{class:"btn-icon btn-delete",onClick:D=>H(B),title:"åˆ é™¤"},[...w[12]||(w[12]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,Qt)])]),B.subMenus&&B.subMenus.length>0?(a(),o("div",Xt,[(a(!0),o(R,null,F(B.subMenus,D=>(a(),o("div",{key:D.id,class:"sub-menu-item"},[e("span",Yt,d(D.name),1),e("span",Zt,"æ’åº: "+d(D.order),1),e("div",es,[e("button",{class:"btn-icon-sm btn-edit",onClick:h=>te(B,D),title:"ç¼–è¾‘"},[...w[13]||(w[13]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,ts),e("button",{class:"btn-icon-sm btn-delete",onClick:h=>se(D),title:"åˆ é™¤"},[...w[14]||(w[14]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"})],-1)])],8,ss)])]))),128))])):(a(),o("div",ls,[...w[15]||(w[15]=[e("span",null,"æš‚æ— å­èœå•",-1)])]))]))),128))]),u.value?(a(),o("div",ns,[e("div",as,[e("div",os,[e("h3",null,d(P.value?"ç¼–è¾‘ä¸»èœå•":"æ·»åŠ å­èœå•"),1),e("button",{class:"modal-close",onClick:N},"Ã—")]),e("div",is,[e("div",rs,[w[16]||(w[16]=e("label",null,"åç§°",-1)),C(e("input",{"onUpdate:modelValue":w[1]||(w[1]=B=>n.value.name=B),type:"text",class:"input",placeholder:"è¯·è¾“å…¥åç§°"},null,512),[[W,n.value.name]])]),e("div",ds,[w[17]||(w[17]=e("label",null,"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":w[2]||(w[2]=B=>n.value.order=B),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[W,n.value.order,void 0,{number:!0}]])])]),e("div",us,[e("button",{class:"btn btn-cancel",onClick:N},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:V,disabled:!n.value.name.trim()},"ä¿å­˜",8,cs)])])])):I("",!0),c.value?(a(),o("div",vs,[e("div",ps,[e("div",ms,[e("h3",null,"æ·»åŠ å­èœå•åˆ°ã€Œ"+d(_.value)+"ã€",1),e("button",{class:"modal-close",onClick:N},"Ã—")]),e("div",fs,[e("div",hs,[w[18]||(w[18]=e("label",null,"å­èœå•åç§°",-1)),C(e("input",{"onUpdate:modelValue":w[3]||(w[3]=B=>k.value.name=B),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[W,k.value.name]])]),e("div",gs,[w[19]||(w[19]=e("label",null,"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":w[4]||(w[4]=B=>k.value.order=B),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[W,k.value.order,void 0,{number:!0}]])])]),e("div",bs,[e("button",{class:"btn btn-cancel",onClick:N},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:ee,disabled:!k.value.name.trim()},"æ·»åŠ ",8,ks)])])])):I("",!0),S.value?(a(),o("div",ys,[e("div",ws,[e("div",{class:"modal-header"},[w[20]||(w[20]=e("h3",null,"ç¼–è¾‘å­èœå•",-1)),e("button",{class:"modal-close",onClick:N},"Ã—")]),e("div",_s,[e("div",Cs,[w[21]||(w[21]=e("label",null,"å­èœå•åç§°",-1)),C(e("input",{"onUpdate:modelValue":w[5]||(w[5]=B=>m.value.name=B),type:"text",class:"input",placeholder:"è¯·è¾“å…¥å­èœå•åç§°"},null,512),[[W,m.value.name]])]),e("div",$s,[w[22]||(w[22]=e("label",null,"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":w[6]||(w[6]=B=>m.value.order=B),type:"number",class:"input",placeholder:"æ•°å­—è¶Šå°è¶Šé å‰"},null,512),[[W,m.value.order,void 0,{number:!0}]])])]),e("div",Ms,[e("button",{class:"btn btn-cancel",onClick:N},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:le,disabled:!m.value.name.trim()},"ä¿å­˜",8,xs)])])])):I("",!0)]))}},Us=Y(Ts,[["__scopeId","data-v-7671c3a1"]]),Ss={class:"card-manage"},Vs={class:"card-header"},As={class:"card-add"},Is=["value"],Bs=["value"],Ds={class:"card-card"},Ps={class:"card-table"},Ls=["onUpdate:modelValue","onBlur"],Ws=["onUpdate:modelValue","onBlur"],zs=["onUpdate:modelValue","onBlur"],Es=["onUpdate:modelValue","onBlur"],Ks=["onClick"],Ns={key:0,class:"selected-tags"},Rs={key:1,class:"tag-placeholder"},Fs=["onUpdate:modelValue","onBlur"],Os=["onClick"],Hs={class:"modal-body"},Gs={key:0,class:"empty-tags"},js={key:1,class:"tag-options"},qs=["checked","onChange"],Js={class:"modal-body"},Qs={class:"duplicate-comparison"},Xs={class:"card-info-box existing"},Ys={class:"card-details"},Zs={class:"detail-row"},el={class:"detail-value"},tl={class:"detail-row"},sl={class:"detail-value url"},ll={key:0,class:"detail-row"},nl={class:"detail-value url"},al={class:"card-info-box pending"},ol={class:"card-details"},il={class:"detail-row"},rl={class:"detail-value"},dl={class:"detail-row"},ul={class:"detail-value url"},cl={key:0,class:"detail-row"},vl={class:"detail-value url"},pl={__name:"CardManage",setup(i){const t=$([]),r=$([]),M=$(),s=$(""),u=$(""),P=$(""),n=$(""),c=$([]),g=$(!1),_=$(null),k=$([]),S=$(!1),b=$(null),m=$(null),f=de(()=>{if(!M.value)return[];const h=t.value.find(p=>p.id===M.value);return(h==null?void 0:h.subMenus)||[]});ne(()=>T(null,null,function*(){const h=yield xe();t.value=h.data,t.value.length&&(M.value=t.value[0].id,s.value="");const p=yield Te();c.value=p.data})),Ve(M,()=>{s.value="",U()}),Ve(s,U);function v(){s.value=""}function A(){U()}function U(){return T(this,null,function*(){if(!M.value)return;const h=yield ot(M.value,s.value||null);r.value=h.data})}function V(){return T(this,null,function*(){if(!u.value||!P.value)return;const h=r.value.find(p=>at({title:u.value,url:P.value},p));h?(b.value=h,m.value={menu_id:M.value,sub_menu_id:s.value||null,title:u.value,url:P.value,logo_url:n.value},S.value=!0):yield N({menu_id:M.value,sub_menu_id:s.value||null,title:u.value,url:P.value,logo_url:n.value})})}function H(h){return T(this,null,function*(){yield Ie(h.id,{menu_id:M.value,sub_menu_id:s.value||null,title:h.title,url:h.url,logo_url:h.logo_url,desc:h.desc,order:h.order,tagIds:h.tags?h.tags.map(p=>p.id):[]}),U()})}function X(h){return T(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ"))return;const p=r.value.findIndex(J=>J.id===h);p>-1&&r.value.splice(p,1);try{yield Be(h)}catch(J){console.error("åˆ é™¤å¡ç‰‡å¤±è´¥:",J),yield U()}})}function ee(h){_.value=h,k.value=h.tags?h.tags.map(p=>p.id):[],g.value=!0}function te(){g.value=!1,_.value=null,k.value=[]}function le(h){const p=k.value.indexOf(h);p>-1?k.value.splice(p,1):k.value.push(h)}function se(){return T(this,null,function*(){_.value&&(yield Ie(_.value.id,{menu_id:_.value.menu_id,sub_menu_id:_.value.sub_menu_id,title:_.value.title,url:_.value.url,logo_url:_.value.logo_url,desc:_.value.desc,order:_.value.order,tagIds:k.value}),te(),U())})}function N(h){return T(this,null,function*(){yield it(h),u.value="",P.value="",n.value="",U()})}function z(){S.value=!1,b.value=null,m.value=null}function w(){z(),u.value="",P.value="",n.value=""}function B(){return T(this,null,function*(){!m.value||!b.value||(yield Be(b.value.id),yield N(m.value),z())})}function D(){m.value&&(u.value=m.value.title,P.value=m.value.url,n.value=m.value.logo_url||"",z(),alert("è¯·ä¿®æ”¹å¡ç‰‡ä¿¡æ¯åå†æ¬¡ç‚¹å‡»â€œæ·»åŠ å¡ç‰‡â€æŒ‰é’®"))}return(h,p)=>{var J,ve,pe,me,fe,Z,he,ge;return a(),o("div",Ss,[e("div",Vs,[p[9]||(p[9]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†ç½‘ç«™å¯¼èˆªå¡ç‰‡ï¼Œæ”¯æŒä¸»èœå•å’Œå­èœå•åˆ†ç±»")],-1)),e("div",As,[C(e("select",{"onUpdate:modelValue":p[0]||(p[0]=L=>M.value=L),class:"input narrow",onChange:v},[(a(!0),o(R,null,F(t.value,L=>(a(),o("option",{value:L.id,key:L.id},d(L.name),9,Is))),128))],544),[[ie,M.value]]),C(e("select",{"onUpdate:modelValue":p[1]||(p[1]=L=>s.value=L),class:"input narrow",onChange:A},[p[7]||(p[7]=e("option",{value:""},"ä¸»èœå•",-1)),(a(!0),o(R,null,F(f.value,L=>(a(),o("option",{value:L.id,key:L.id},d(L.name),9,Bs))),128))],544),[[ie,s.value]]),C(e("input",{"onUpdate:modelValue":p[2]||(p[2]=L=>u.value=L),placeholder:"å¡ç‰‡æ ‡é¢˜",class:"input narrow"},null,512),[[W,u.value]]),C(e("input",{"onUpdate:modelValue":p[3]||(p[3]=L=>P.value=L),placeholder:"å¡ç‰‡é“¾æ¥",class:"input wide"},null,512),[[W,P.value]]),C(e("input",{"onUpdate:modelValue":p[4]||(p[4]=L=>n.value=L),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input wide"},null,512),[[W,n.value]]),e("button",{class:"btn",onClick:V},[...p[8]||(p[8]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),E(" æ·»åŠ å¡ç‰‡ ",-1)])])])]),e("div",Ds,[e("table",Ps,[p[11]||(p[11]=e("thead",null,[e("tr",null,[e("th",null,"æ ‡é¢˜"),e("th",null,"ç½‘å€"),e("th",null,"Logoé“¾æ¥"),e("th",null,"æè¿°"),e("th",null,"æ ‡ç­¾"),e("th",null,"æ’åº"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(a(!0),o(R,null,F(r.value,L=>(a(),o("tr",{key:L.id},[e("td",null,[C(e("input",{"onUpdate:modelValue":O=>L.title=O,onBlur:O=>H(L),class:"table-input"},null,40,Ls),[[W,L.title]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":O=>L.url=O,onBlur:O=>H(L),class:"table-input"},null,40,Ws),[[W,L.url]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":O=>L.logo_url=O,onBlur:O=>H(L),class:"table-input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,zs),[[W,L.logo_url]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":O=>L.desc=O,onBlur:O=>H(L),class:"table-input",placeholder:"æè¿°ï¼ˆå¯é€‰ï¼‰"},null,40,Es),[[W,L.desc]])]),e("td",null,[e("div",{class:"tag-selector",onClick:O=>ee(L)},[L.tags&&L.tags.length>0?(a(),o("div",Ns,[(a(!0),o(R,null,F(L.tags,O=>(a(),o("span",{key:O.id,class:"mini-tag",style:ce({backgroundColor:O.color})},d(O.name),5))),128))])):(a(),o("span",Rs,"é€‰æ‹©æ ‡ç­¾"))],8,Ks)]),e("td",null,[C(e("input",{"onUpdate:modelValue":O=>L.order=O,type:"number",onBlur:O=>H(L),class:"table-input order-input"},null,40,Fs),[[W,L.order,void 0,{number:!0}]])]),e("td",null,[e("button",{class:"btn btn-danger btn-icon",onClick:O=>X(L.id),title:"åˆ é™¤"},[...p[10]||(p[10]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,Os)])]))),128))])])]),g.value?(a(),o("div",{key:0,class:"modal-overlay",onClick:te},[e("div",{class:"modal-content",onClick:p[5]||(p[5]=ye(()=>{},["stop"]))},[e("div",{class:"modal-header"},[p[12]||(p[12]=e("h3",null,"é€‰æ‹©æ ‡ç­¾",-1)),e("button",{class:"close-btn",onClick:te},"Ã—")]),e("div",Hs,[c.value.length===0?(a(),o("div",Gs,[...p[13]||(p[13]=[e("p",null,"æš‚æ— æ ‡ç­¾ï¼Œè¯·å…ˆåœ¨æ ‡ç­¾ç®¡ç†é¡µé¢åˆ›å»º",-1)])])):(a(),o("div",js,[(a(!0),o(R,null,F(c.value,L=>(a(),o("label",{key:L.id,class:"tag-option"},[e("input",{type:"checkbox",checked:k.value.includes(L.id),onChange:O=>le(L.id)},null,40,qs),e("span",{class:"tag-label",style:ce({backgroundColor:L.color})},d(L.name),5)]))),128))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:te},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:se},"ç¡®å®š")])])])):I("",!0),S.value?(a(),o("div",{key:1,class:"modal-overlay",onClick:z},[e("div",{class:"modal-content duplicate-modal",onClick:p[6]||(p[6]=ye(()=>{},["stop"]))},[e("div",{class:"modal-header"},[p[14]||(p[14]=re('<div class="header-with-icon" data-v-edd548d5><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" data-v-edd548d5><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-edd548d5></path><line x1="12" y1="9" x2="12" y2="13" data-v-edd548d5></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-edd548d5></line></svg><h3 data-v-edd548d5>æ£€æµ‹åˆ°é‡å¤å¡ç‰‡</h3></div>',1)),e("button",{class:"close-btn",onClick:z},"Ã—")]),e("div",Js,[p[24]||(p[24]=e("div",{class:"duplicate-warning"},[e("p",{class:"warning-text"},"æ‚¨è¦æ·»åŠ çš„å¡ç‰‡ä¸ä»¥ä¸‹ç°æœ‰å¡ç‰‡é‡å¤ï¼š")],-1)),e("div",Qs,[e("div",Xs,[p[18]||(p[18]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"ç°æœ‰å¡ç‰‡")],-1)),e("div",Ys,[e("div",Zs,[p[15]||(p[15]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",el,d((J=b.value)==null?void 0:J.title),1)]),e("div",tl,[p[16]||(p[16]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",sl,d((ve=b.value)==null?void 0:ve.url),1)]),(pe=b.value)!=null&&pe.logo_url?(a(),o("div",ll,[p[17]||(p[17]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",nl,d((me=b.value)==null?void 0:me.logo_url),1)])):I("",!0)])]),p[23]||(p[23]=e("div",{class:"arrow-divider"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af","stroke-width":"2"},[e("path",{d:"M5 12h14M12 5l7 7-7 7"})])],-1)),e("div",al,[p[22]||(p[22]=e("div",{class:"box-header"},[e("span",{class:"box-label"},"å¾…æ·»åŠ å¡ç‰‡")],-1)),e("div",ol,[e("div",il,[p[19]||(p[19]=e("span",{class:"detail-label"},"æ ‡é¢˜ï¼š",-1)),e("span",rl,d((fe=m.value)==null?void 0:fe.title),1)]),e("div",dl,[p[20]||(p[20]=e("span",{class:"detail-label"},"ç½‘å€ï¼š",-1)),e("span",ul,d((Z=m.value)==null?void 0:Z.url),1)]),(he=m.value)!=null&&he.logo_url?(a(),o("div",cl,[p[21]||(p[21]=e("span",{class:"detail-label"},"Logoï¼š",-1)),e("span",vl,d((ge=m.value)==null?void 0:ge.logo_url),1)])):I("",!0)])])]),p[25]||(p[25]=e("div",{class:"duplicate-actions-info"},[e("p",null,"è¯·é€‰æ‹©å¦‚ä½•å¤„ç†ï¼š")],-1))]),e("div",{class:"modal-footer duplicate-footer"},[e("button",{class:"btn btn-secondary",onClick:w},[...p[26]||(p[26]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),E(" è·³è¿‡ ",-1)])]),e("button",{class:"btn btn-warning",onClick:B},[...p[27]||(p[27]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e("path",{d:"M21 3v5h-5"})],-1),E(" æ›¿æ¢ ",-1)])]),e("button",{class:"btn btn-primary",onClick:D},[...p[28]||(p[28]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1),E(" ç¼–è¾‘åæ·»åŠ  ",-1)])])])])])):I("",!0)])}}},ml=Y(pl,[["__scopeId","data-v-edd548d5"]]),fl={class:"duplicate-manage"},hl={class:"section-header"},gl=["disabled"],bl={key:0,class:"duplicate-results"},kl={class:"result-summary"},yl={class:"summary-card"},wl={class:"summary-value"},_l={class:"summary-card warning"},Cl={class:"summary-value"},$l={class:"summary-card danger"},Ml={class:"summary-value"},xl={class:"duplicate-groups"},Tl={class:"group-header"},Ul={class:"group-count"},Sl={class:"card-item original"},Vl={class:"card-info"},Al={class:"card-title"},Il={class:"card-url"},Bl={key:0,class:"card-desc"},Dl={class:"card-id"},Pl={class:"duplicates-list"},Ll={class:"card-info"},Wl={class:"card-title"},zl={class:"card-url"},El={key:0,class:"card-desc"},Kl={class:"card-actions"},Nl={class:"card-id"},Rl=["onClick","disabled"],Fl={class:"group-actions"},Ol=["onClick","disabled"],Hl={class:"global-actions"},Gl=["disabled"],jl={key:1,class:"no-duplicates"},ql={key:2,class:"initial-hint"},Jl={key:3,class:"error"},Ql={__name:"DuplicateManage",setup(i){const t=$(!1),r=$(!1),M=$(!1),s=$([]),u=$(0),P=$(0),n=$("");function c(){return T(this,null,function*(){var S,b;t.value=!0,n.value="";try{const m=yield rt();u.value=m.data.total,s.value=m.data.duplicateGroups,P.value=m.data.duplicateCount,M.value=!0}catch(m){n.value=((b=(S=m.response)==null?void 0:S.data)==null?void 0:b.error)||"æ£€æµ‹å¤±è´¥",console.error("æ£€æµ‹é‡å¤å¤±è´¥:",m)}finally{t.value=!1}})}function g(S){return T(this,null,function*(){var b,m,f;if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å¡ç‰‡å—ï¼Ÿ")){r.value=!0,n.value="";try{console.log("[å»é‡ç®¡ç†] åˆ é™¤å•ä¸ªå¡ç‰‡:",S);const v=yield _e([S]);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",v.data),v.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield c()):n.value="åˆ é™¤å¤±è´¥ï¼š"+(v.data.message||"æœªçŸ¥é”™è¯¯")}catch(v){console.error("[å»é‡ç®¡ç†] åˆ é™¤å¡ç‰‡å¤±è´¥:",v),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(b=v.response)==null?void 0:b.data),n.value=((f=(m=v.response)==null?void 0:m.data)==null?void 0:f.error)||v.message||"åˆ é™¤å¤±è´¥"}finally{r.value=!1}}})}function _(S){return T(this,null,function*(){var m,f,v;const b=S.duplicates.length;if(confirm(`ç¡®å®šè¦åˆ é™¤è¿™ ${b} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

å°†ä¿ç•™ï¼š${S.original.title}`)){r.value=!0,n.value="";try{const A=S.duplicates.map(V=>V.id);console.log("[å»é‡ç®¡ç†] åˆ é™¤ä¸€ç»„é‡å¤å¡ç‰‡:",A);const U=yield _e(A);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",U.data),U.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield c()):n.value="åˆ é™¤å¤±è´¥ï¼š"+(U.data.message||"æœªçŸ¥é”™è¯¯")}catch(A){console.error("[å»é‡ç®¡ç†] åˆ é™¤é‡å¤å¡ç‰‡å¤±è´¥:",A),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(m=A.response)==null?void 0:m.data),n.value=((v=(f=A.response)==null?void 0:f.data)==null?void 0:v.error)||A.message||"åˆ é™¤å¤±è´¥"}finally{r.value=!1}}})}function k(){return T(this,null,function*(){var b,m,f;const S=P.value;if(confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${S} å¼ é‡å¤å¡ç‰‡å—ï¼Ÿ

æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)){r.value=!0,n.value="";try{const v=s.value.flatMap(U=>U.duplicates.map(V=>V.id));console.log("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡:",v);const A=yield _e(v);console.log("[å»é‡ç®¡ç†] åˆ é™¤å“åº”:",A.data),A.data.success?(console.log("[å»é‡ç®¡ç†] åˆ é™¤æˆåŠŸï¼Œé‡æ–°æ£€æµ‹..."),yield c()):n.value="åˆ é™¤å¤±è´¥ï¼š"+(A.data.message||"æœªçŸ¥é”™è¯¯")}catch(v){console.error("[å»é‡ç®¡ç†] åˆ é™¤æ‰€æœ‰é‡å¤å¤±è´¥:",v),console.error("[å»é‡ç®¡ç†] é”™è¯¯è¯¦æƒ…:",(b=v.response)==null?void 0:b.data),n.value=((f=(m=v.response)==null?void 0:m.data)==null?void 0:f.error)||v.message||"åˆ é™¤å¤±è´¥"}finally{r.value=!1}}})}return(S,b)=>(a(),o("div",fl,[e("div",hl,[b[0]||(b[0]=e("h3",null,"å¡ç‰‡å»é‡ç®¡ç†",-1)),e("button",{onClick:c,class:"btn btn-primary",disabled:t.value},d(t.value?"æ£€æµ‹ä¸­...":"ğŸ” ä¸€é”®æ£€æµ‹é‡å¤"),9,gl)]),s.value.length>0?(a(),o("div",bl,[e("div",kl,[e("div",yl,[b[1]||(b[1]=e("div",{class:"summary-label"},"æ€»å¡ç‰‡æ•°",-1)),e("div",wl,d(u.value),1)]),e("div",_l,[b[2]||(b[2]=e("div",{class:"summary-label"},"é‡å¤ç»„æ•°",-1)),e("div",Cl,d(s.value.length),1)]),e("div",$l,[b[3]||(b[3]=e("div",{class:"summary-label"},"é‡å¤å¡ç‰‡",-1)),e("div",Ml,d(P.value),1)])]),e("div",xl,[(a(!0),o(R,null,F(s.value,(m,f)=>(a(),o("div",{key:f,class:"duplicate-group"},[e("div",Tl,[e("h4",null,"é‡å¤ç»„ "+d(f+1),1),e("span",Ul,d(m.totalCount)+" å¼ å¡ç‰‡",1)]),e("div",Sl,[b[4]||(b[4]=e("div",{class:"card-badge"},"ä¿ç•™",-1)),e("div",Vl,[e("div",Al,d(m.original.title),1),e("div",Il,d(m.original.url),1),m.original.desc?(a(),o("div",Bl,d(m.original.desc),1)):I("",!0)]),e("div",Dl,"ID: "+d(m.original.id),1)]),e("div",Pl,[(a(!0),o(R,null,F(m.duplicates,v=>(a(),o("div",{key:v.id,class:"card-item duplicate"},[b[5]||(b[5]=e("div",{class:"card-badge danger"},"é‡å¤",-1)),e("div",Ll,[e("div",Wl,d(v.title),1),e("div",zl,d(v.url),1),v.desc?(a(),o("div",El,d(v.desc),1)):I("",!0)]),e("div",Kl,[e("span",Nl,"ID: "+d(v.id),1),e("button",{onClick:A=>g(v.id),class:"btn-remove",disabled:r.value,title:"åˆ é™¤æ­¤å¡ç‰‡"}," åˆ é™¤ ",8,Rl)])]))),128))]),e("div",Fl,[e("button",{onClick:v=>_(m),class:"btn btn-danger",disabled:r.value}," åˆ é™¤æ­¤ç»„æ‰€æœ‰é‡å¤å¡ç‰‡ ("+d(m.duplicates.length)+" å¼ ) ",9,Ol)])]))),128))]),e("div",Hl,[e("button",{onClick:k,class:"btn btn-danger btn-large",disabled:r.value},d(r.value?"åˆ é™¤ä¸­...":`åˆ é™¤æ‰€æœ‰é‡å¤å¡ç‰‡ (${P.value} å¼ )`),9,Gl)])])):M.value&&s.value.length===0?(a(),o("div",jl,[...b[6]||(b[6]=[e("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"#1abc9c","stroke-width":"2"},[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),e("h3",null,"å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°é‡å¤å¡ç‰‡",-1),e("p",null,"æ‚¨çš„å¯¼èˆªå¡ç‰‡éƒ½æ˜¯å”¯ä¸€çš„",-1)])])):M.value?I("",!0):(a(),o("div",ql,[...b[7]||(b[7]=[re('<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" data-v-62bbc778><circle cx="12" cy="12" r="10" data-v-62bbc778></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-62bbc778></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-62bbc778></line></svg><h3 data-v-62bbc778>ç‚¹å‡»&quot;ä¸€é”®æ£€æµ‹é‡å¤&quot;å¼€å§‹æ‰«æ</h3><p data-v-62bbc778>ç³»ç»Ÿå°†æ£€æµ‹æ‰€æœ‰é‡å¤çš„å¯¼èˆªå¡ç‰‡</p><ul class="hint-list" data-v-62bbc778><li data-v-62bbc778>ğŸ“Œ URL ç›¸åŒçš„å¡ç‰‡</li><li data-v-62bbc778>ğŸ“Œ æ ‡é¢˜ç›¸åŒä¸”åŸŸåç›¸åŒçš„å¡ç‰‡</li></ul>',4)])])),n.value?(a(),o("p",Jl,d(n.value),1)):I("",!0)]))}},Xl=Y(Ql,[["__scopeId","data-v-62bbc778"]]),Yl={class:"tag-manage"},Zl={class:"tag-header"},en={class:"tag-add"},tn={class:"tag-content"},sn={key:0,class:"empty-state"},ln={key:1,class:"tag-list"},nn={class:"tag-info"},an=["onUpdate:modelValue","onBlur"],on={class:"tag-stats"},rn={class:"card-count"},dn={class:"tag-controls"},un=["onUpdate:modelValue","onChange"],cn={class:"tag-order"},vn=["onUpdate:modelValue","onBlur"],pn={class:"tag-actions"},mn=["onClick"],fn={__name:"TagManage",setup(i){const t=$([]),r=$(""),M=$("#2566d8");ne(s);function s(){return T(this,null,function*(){const c=yield Te();t.value=c.data;for(const g of t.value)try{const _=yield dt(g.id);g.cardCount=_.data.count}catch(_){g.cardCount=0}})}function u(){return T(this,null,function*(){var S,b;if(!r.value.trim())return;const c=t.value.length?Math.max(...t.value.map(m=>m.order||0)):0,g=r.value.trim(),_=M.value,k={id:Date.now(),name:g,color:_,order:c+1,cardCount:0,_temp:!0};t.value.push(k),r.value="",M.value="#2566d8";try{const m=yield ut({name:g,color:_,order:c+1}),f=t.value.findIndex(v=>v.id===k.id);f>-1&&(t.value[f]=ae(Q({},m.data),{cardCount:0}))}catch(m){const f=t.value.findIndex(v=>v.id===k.id);f>-1&&t.value.splice(f,1),alert("æ·»åŠ æ ‡ç­¾å¤±è´¥ï¼š"+(((b=(S=m.response)==null?void 0:S.data)==null?void 0:b.error)||m.message))}})}function P(c){return T(this,null,function*(){var g,_;if(!c._temp)try{yield ct(c.id,{name:c.name,color:c.color,order:c.order})}catch(k){alert("æ›´æ–°æ ‡ç­¾å¤±è´¥ï¼š"+(((_=(g=k.response)==null?void 0:g.data)==null?void 0:_.error)||k.message)),s()}})}function n(c){return T(this,null,function*(){var S,b;const g=t.value.find(m=>m.id===c);if(!g)return;const _=g.cardCount>0?`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${g.name}"å—ï¼Ÿè¿™å°†å–æ¶ˆ ${g.cardCount} å¼ å¡ç‰‡çš„å…³è”ã€‚`:`ç¡®å®šè¦åˆ é™¤æ ‡ç­¾"${g.name}"å—ï¼Ÿ`;if(!confirm(_))return;const k=t.value.findIndex(m=>m.id===c);k>-1&&t.value.splice(k,1);try{yield vt(c)}catch(m){alert("åˆ é™¤æ ‡ç­¾å¤±è´¥ï¼š"+(((b=(S=m.response)==null?void 0:S.data)==null?void 0:b.error)||m.message)),s()}})}return(c,g)=>(a(),o("div",Yl,[e("div",Zl,[g[3]||(g[3]=e("div",{class:"header-content"},[e("h2",{class:"page-title"},"ç®¡ç†æ ‡ç­¾"),e("p",{class:"page-desc"},"ä¸ºå¡ç‰‡åˆ›å»ºå¤šç»´åº¦åˆ†ç±»æ ‡ç­¾")],-1)),e("div",en,[C(e("input",{"onUpdate:modelValue":g[0]||(g[0]=_=>r.value=_),placeholder:"æ ‡ç­¾åç§°",class:"input",maxlength:"20"},null,512),[[W,r.value]]),C(e("input",{"onUpdate:modelValue":g[1]||(g[1]=_=>M.value=_),type:"color",class:"color-input",title:"é€‰æ‹©æ ‡ç­¾é¢œè‰²"},null,512),[[W,M.value]]),e("button",{class:"btn btn-primary",onClick:u},[...g[2]||(g[2]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),E(" æ·»åŠ æ ‡ç­¾ ",-1)])])])]),e("div",tn,[t.value.length===0?(a(),o("div",sn,[...g[4]||(g[4]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1),e("p",null,"æš‚æ— æ ‡ç­¾",-1),e("p",{class:"hint"},"åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå¼€å§‹ä¸ºå¡ç‰‡æ·»åŠ å¤šç»´åº¦åˆ†ç±»",-1)])])):(a(),o("div",ln,[(a(!0),o(R,null,F(t.value,_=>(a(),o("div",{key:_.id,class:"tag-item"},[e("div",{class:"tag-preview",style:ce({backgroundColor:_.color})},[...g[5]||(g[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})],-1)])],4),e("div",nn,[C(e("input",{"onUpdate:modelValue":k=>_.name=k,onBlur:k=>P(_),class:"tag-name-input",maxlength:"20"},null,40,an),[[W,_.name]]),e("div",on,[e("span",rn,d(_.cardCount||0)+" å¼ å¡ç‰‡",1)])]),e("div",dn,[C(e("input",{"onUpdate:modelValue":k=>_.color=k,type:"color",onChange:k=>P(_),class:"color-picker",title:"æ›´æ”¹é¢œè‰²"},null,40,un),[[W,_.color]]),e("div",cn,[g[6]||(g[6]=e("span",{class:"order-label"},"æ’åº",-1)),C(e("input",{"onUpdate:modelValue":k=>_.order=k,type:"number",onBlur:k=>P(_),class:"order-input"},null,40,vn),[[W,_.order,void 0,{number:!0}]])])]),e("div",pn,[e("button",{class:"btn btn-danger btn-icon",onClick:k=>n(_.id),title:"åˆ é™¤æ ‡ç­¾"},[...g[7]||(g[7]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e("path",{d:"M10 11v6M14 11v6"})],-1)])],8,mn)])]))),128))]))])]))}},hn=Y(fn,[["__scopeId","data-v-56efcb56"]]),gn={class:"promo-manage"},bn={key:0,class:"loading-overlay"},kn={class:"promo-header"},yn={class:"promo-form"},wn=["disabled"],_n={class:"promo-section"},Cn={class:"promo-list"},$n={key:0,class:"empty-state"},Mn={class:"promo-preview"},xn=["src"],Tn={class:"promo-info"},Un={class:"promo-field"},Sn=["onUpdate:modelValue","onBlur"],Vn={class:"promo-field"},An=["onUpdate:modelValue","onBlur"],In={class:"promo-actions"},Bn=["onClick"],Dn={class:"promo-section"},Pn={class:"promo-list"},Ln={key:0,class:"empty-state"},Wn={class:"promo-preview"},zn=["src"],En={class:"promo-info"},Kn={class:"promo-field"},Nn=["onUpdate:modelValue","onBlur"],Rn={class:"promo-field"},Fn=["onUpdate:modelValue","onBlur"],On={class:"promo-actions"},Hn=["onClick"],ke="/api",Gn={__name:"PromoManage",setup(i){const t=()=>localStorage.getItem("token")||"",r=()=>({Authorization:`Bearer ${t()}`}),M=$([]),s=$(!1),u=$("åŠ è½½ä¸­..."),P=$({img:"",url:"",position:"left"}),n=de(()=>M.value.filter(m=>m.position==="left")),c=de(()=>M.value.filter(m=>m.position==="right"));ne(()=>{g()});function g(){return T(this,null,function*(){var m,f;s.value=!0,u.value="åŠ è½½ä¸­...";try{const v=yield be.get(`${ke}/promos`);let A=[];Array.isArray(v.data)?A=v.data:v.data&&Array.isArray(v.data.data)&&(A=v.data.data),M.value=A}catch(v){console.error("åŠ è½½å®£ä¼ å¤±è´¥:",v),alert("åŠ è½½å®£ä¼ å¤±è´¥: "+(((f=(m=v.response)==null?void 0:m.data)==null?void 0:f.error)||v.message))}finally{s.value=!1}})}function _(){return T(this,null,function*(){var m,f;if(!P.value.img||!P.value.url){alert("è¯·å¡«å†™å®£ä¼ å›¾ç‰‡é“¾æ¥å’Œè·³è½¬é“¾æ¥");return}s.value=!0,u.value="æ·»åŠ ä¸­...";try{yield be.post(`${ke}/promos`,P.value,{headers:r()}),P.value={img:"",url:"",position:"left"},yield g()}catch(v){alert("æ·»åŠ å¤±è´¥: "+(((f=(m=v.response)==null?void 0:m.data)==null?void 0:f.error)||v.message)),s.value=!1}})}function k(m){return T(this,null,function*(){var f,v;try{yield be.put(`${ke}/promos/${m.id}`,{img:m.img,url:m.url},{headers:r()})}catch(A){alert("æ›´æ–°å¤±è´¥: "+(((v=(f=A.response)==null?void 0:f.data)==null?void 0:v.error)||A.message)),yield g()}})}function S(m){return T(this,null,function*(){var f,v;if(confirm("ç¡®å®šåˆ é™¤è¿™ä¸ªå®£ä¼ å—ï¼Ÿ")){s.value=!0,u.value="åˆ é™¤ä¸­...";try{yield be.delete(`${ke}/promos/${m.id}`,{headers:r()}),yield g()}catch(A){alert("åˆ é™¤å¤±è´¥: "+(((v=(f=A.response)==null?void 0:f.data)==null?void 0:v.error)||A.message)),s.value=!1}}})}function b(m){m.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="60"><rect fill="%23f0f0f0" width="100" height="60"/><text x="50" y="35" text-anchor="middle" fill="%23999" font-size="12">å›¾ç‰‡åŠ è½½å¤±è´¥</text></svg>'}return(m,f)=>(a(),o("div",gn,[s.value?(a(),o("div",bn,[f[3]||(f[3]=e("div",{class:"loading-spinner"},null,-1)),e("span",null,d(u.value),1)])):I("",!0),e("div",kn,[f[5]||(f[5]=e("h2",{class:"page-title"},"å®£ä¼ ç®¡ç†",-1)),e("div",yn,[C(e("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>P.value.img=v),placeholder:"å®£ä¼ å›¾ç‰‡é“¾æ¥",class:"input"},null,512),[[W,P.value.img]]),C(e("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>P.value.url=v),placeholder:"å®£ä¼ è·³è½¬é“¾æ¥",class:"input"},null,512),[[W,P.value.url]]),C(e("select",{"onUpdate:modelValue":f[2]||(f[2]=v=>P.value.position=v),class:"input select"},[...f[4]||(f[4]=[e("option",{value:"left"},"å·¦ä¾§å®£ä¼ ",-1),e("option",{value:"right"},"å³ä¾§å®£ä¼ ",-1)])],512),[[ie,P.value.position]]),e("button",{class:"btn btn-primary",onClick:_,disabled:!P.value.img||!P.value.url}," + æ·»åŠ å®£ä¼  ",8,wn)])]),e("div",_n,[f[8]||(f[8]=e("h3",{class:"section-title"},"ğŸ“ å·¦ä¾§å®£ä¼ ",-1)),e("div",Cn,[n.value.length===0?(a(),o("div",$n,"æš‚æ— å·¦ä¾§å®£ä¼ ")):I("",!0),(a(!0),o(R,null,F(n.value,v=>(a(),o("div",{key:v.id,class:"promo-card"},[e("div",Mn,[e("img",{src:v.img,alt:"å®£ä¼ å›¾ç‰‡",onError:b},null,40,xn)]),e("div",Tn,[e("div",Un,[f[6]||(f[6]=e("label",null,"å›¾ç‰‡é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":A=>v.img=A,class:"input",onBlur:A=>k(v)},null,40,Sn),[[W,v.img]])]),e("div",Vn,[f[7]||(f[7]=e("label",null,"è·³è½¬é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":A=>v.url=A,class:"input",onBlur:A=>k(v)},null,40,An),[[W,v.url]])])]),e("div",In,[e("button",{class:"btn btn-danger",onClick:A=>S(v)},"åˆ é™¤",8,Bn)])]))),128))])]),e("div",Dn,[f[11]||(f[11]=e("h3",{class:"section-title"},"ğŸ“ å³ä¾§å®£ä¼ ",-1)),e("div",Pn,[c.value.length===0?(a(),o("div",Ln,"æš‚æ— å³ä¾§å®£ä¼ ")):I("",!0),(a(!0),o(R,null,F(c.value,v=>(a(),o("div",{key:v.id,class:"promo-card"},[e("div",Wn,[e("img",{src:v.img,alt:"å®£ä¼ å›¾ç‰‡",onError:b},null,40,zn)]),e("div",En,[e("div",Kn,[f[9]||(f[9]=e("label",null,"å›¾ç‰‡é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":A=>v.img=A,class:"input",onBlur:A=>k(v)},null,40,Nn),[[W,v.img]])]),e("div",Rn,[f[10]||(f[10]=e("label",null,"è·³è½¬é“¾æ¥",-1)),C(e("input",{"onUpdate:modelValue":A=>v.url=A,class:"input",onBlur:A=>k(v)},null,40,Fn),[[W,v.url]])])]),e("div",On,[e("button",{class:"btn btn-danger",onClick:A=>S(v)},"åˆ é™¤",8,Hn)])]))),128))])])]))}},jn=Y(Gn,[["__scopeId","data-v-0221fbc3"]]),qn={class:"friend-manage"},Jn={class:"friend-add"},Qn={class:"friend-card"},Xn={class:"friend-table"},Yn=["onUpdate:modelValue","onBlur"],Zn=["onUpdate:modelValue","onBlur"],ea=["onUpdate:modelValue","onBlur"],ta=["onClick"],sa={__name:"FriendLinkManage",setup(i){const t=$([]),r=$(""),M=$(""),s=$("");ne(u);function u(){return T(this,null,function*(){const g=yield pt();t.value=g.data})}function P(){return T(this,null,function*(){!r.value||!M.value||(yield mt({title:r.value,url:M.value,logo:s.value}),r.value="",M.value="",s.value="",u())})}function n(g){return T(this,null,function*(){yield ft(g.id,{title:g.title,url:g.url,logo:g.logo}),u()})}function c(g){return T(this,null,function*(){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå‹é“¾å—ï¼Ÿ"))return;const _=t.value.findIndex(k=>k.id===g);_>-1&&t.value.splice(_,1);try{yield ht(g)}catch(k){console.error("åˆ é™¤å‹é“¾å¤±è´¥:",k),yield u()}})}return(g,_)=>(a(),o("div",qn,[_[4]||(_[4]=e("div",{class:"friend-header"},null,-1)),e("div",Jn,[C(e("input",{"onUpdate:modelValue":_[0]||(_[0]=k=>r.value=k),placeholder:"ç½‘ç«™å",class:"input"},null,512),[[W,r.value]]),C(e("input",{"onUpdate:modelValue":_[1]||(_[1]=k=>M.value=k),placeholder:"ç½‘ç«™é“¾æ¥",class:"input"},null,512),[[W,M.value]]),C(e("input",{"onUpdate:modelValue":_[2]||(_[2]=k=>s.value=k),placeholder:"logoé“¾æ¥(å¯é€‰)",class:"input"},null,512),[[W,s.value]]),e("button",{class:"btn",onClick:P},"æ·»åŠ å‹é“¾")]),e("div",Qn,[e("table",Xn,[_[3]||(_[3]=e("thead",null,[e("tr",null,[e("th",null,"ç½‘ç«™å"),e("th",null,"é“¾æ¥"),e("th",null,"Logo"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(a(!0),o(R,null,F(t.value,k=>(a(),o("tr",{key:k.id},[e("td",null,[C(e("input",{"onUpdate:modelValue":S=>k.title=S,onBlur:S=>n(k),class:"input"},null,40,Yn),[[W,k.title]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":S=>k.url=S,onBlur:S=>n(k),class:"input"},null,40,Zn),[[W,k.url]])]),e("td",null,[C(e("input",{"onUpdate:modelValue":S=>k.logo=S,onBlur:S=>n(k),class:"input",placeholder:"logoé“¾æ¥(å¯é€‰)"},null,40,ea),[[W,k.logo]])]),e("td",null,[e("button",{class:"btn btn-danger",onClick:S=>c(k.id)},"åˆ é™¤",8,ta)])]))),128))])])])]))}},la=Y(sa,[["__scopeId","data-v-c25e838c"]]),na={class:"user-manage"},aa={class:"user-card"},oa={class:"username-section"},ia={class:"username-form"},ra={class:"current-username"},da={class:"username-display"},ua={class:"form-group"},ca={class:"form-actions"},va=["disabled"],pa={class:"password-section"},ma={class:"password-form"},fa={class:"form-group"},ha={class:"form-group"},ga={class:"form-group"},ba={class:"form-actions"},ka=["disabled"],ya={__name:"UserManage",setup(i){const t=$(""),r=$(""),M=$(""),s=$(!1),u=$(""),P=$("success"),n=$({}),c=$(""),g=$(!1),_=$(""),k=$("success");ne(()=>T(null,null,function*(){yield S()}));function S(){return T(this,null,function*(){try{const A=yield gt();n.value=A.data.data||A.data}catch(A){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",A)}})}function b(){return T(this,null,function*(){var A,U;if(!c.value){m("è¯·è¾“å…¥æ–°ç”¨æˆ·å","error");return}if(c.value.length<3||c.value.length>20){m("ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä½","error");return}if(c.value===n.value.username){m("æ–°ç”¨æˆ·åä¸èƒ½ä¸å½“å‰ç”¨æˆ·åç›¸åŒ","error");return}g.value=!0,_.value="";try{yield bt(c.value),m("ç”¨æˆ·åä¿®æ”¹æˆåŠŸï¼2ç§’åè‡ªåŠ¨é€€å‡ºï¼Œè¯·ä½¿ç”¨æ–°ç”¨æˆ·åé‡æ–°ç™»å½•...","success"),c.value="",setTimeout(()=>{localStorage.removeItem("token"),window.location.href="/admin"},2e3)}catch(V){m(((U=(A=V.response)==null?void 0:A.data)==null?void 0:U.message)||"ç”¨æˆ·åä¿®æ”¹å¤±è´¥","error")}finally{g.value=!1}})}function m(A,U){_.value=A,k.value=U,setTimeout(()=>{_.value=""},3e3)}function f(){return T(this,null,function*(){var A,U;if(!t.value||!r.value||!M.value){v("è¯·å¡«å†™æ‰€æœ‰å¯†ç å­—æ®µ","error");return}if(r.value!==M.value){v("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´","error");return}if(r.value.length<6){v("æ–°å¯†ç é•¿åº¦è‡³å°‘6ä½","error");return}s.value=!0,u.value="";try{yield kt(t.value,r.value),v("å¯†ç ä¿®æ”¹æˆåŠŸ","success"),t.value="",r.value="",M.value=""}catch(V){v(((U=(A=V.response)==null?void 0:A.data)==null?void 0:U.message)||"å¯†ç ä¿®æ”¹å¤±è´¥","error")}finally{s.value=!1}})}function v(A,U){u.value=A,P.value=U,A==="å¯†ç ä¿®æ”¹æˆåŠŸ"&&U==="success"?setTimeout(()=>{u.value="2ç§’åè‡ªåŠ¨é€€å‡ºç™»å½•,è¯·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•...",setTimeout(()=>{localStorage.removeItem("token"),window.location.reload()},2e3)},500):setTimeout(()=>{u.value=""},3e3)}return(A,U)=>(a(),o("div",na,[U[11]||(U[11]=e("div",{class:"user-header"},null,-1)),e("div",aa,[e("div",oa,[U[6]||(U[6]=e("h3",{class:"section-title"},"ä¿®æ”¹ç”¨æˆ·å",-1)),e("div",ia,[e("div",ra,[U[4]||(U[4]=e("label",null,"å½“å‰ç”¨æˆ·åï¼š",-1)),e("span",da,d(n.value.username||"admin"),1)]),e("div",ua,[U[5]||(U[5]=e("label",null,"æ–°ç”¨æˆ·åï¼š",-1)),C(e("input",{"onUpdate:modelValue":U[0]||(U[0]=V=>c.value=V),type:"text",placeholder:"è¯·è¾“å…¥æ–°ç”¨æˆ·åï¼ˆ3-20ä½ï¼‰",class:"input"},null,512),[[W,c.value]])]),e("div",ca,[e("button",{onClick:b,class:"btn",disabled:g.value},d(g.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹ç”¨æˆ·å"),9,va)]),_.value?(a(),o("p",{key:0,class:K(["message",k.value])},d(_.value),3)):I("",!0)])]),e("div",pa,[U[10]||(U[10]=e("h3",{class:"section-title"},"ä¿®æ”¹å¯†ç ",-1)),e("div",ma,[e("div",fa,[U[7]||(U[7]=e("label",null,"å½“å‰å¯†ç ï¼š",-1)),C(e("input",{"onUpdate:modelValue":U[1]||(U[1]=V=>t.value=V),type:"password",placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"input"},null,512),[[W,t.value]])]),e("div",ha,[U[8]||(U[8]=e("label",null,"æ–°å¯†ç ï¼š",-1)),C(e("input",{"onUpdate:modelValue":U[2]||(U[2]=V=>r.value=V),type:"password",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[W,r.value]])]),e("div",ga,[U[9]||(U[9]=e("label",null,"ç¡®è®¤æ–°å¯†ç ï¼š",-1)),C(e("input",{"onUpdate:modelValue":U[3]||(U[3]=V=>M.value=V),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"input"},null,512),[[W,M.value]])]),e("div",ba,[e("button",{onClick:f,class:"btn",disabled:s.value},d(s.value?"ä¿®æ”¹ä¸­...":"ä¿®æ”¹å¯†ç "),9,ka)]),u.value?(a(),o("p",{key:0,class:K(["message",P.value])},d(u.value),3)):I("",!0)])])])]))}},wa=Y(ya,[["__scopeId","data-v-40392133"]]),_a={class:"backup-manage"},Ca={class:"tabs"},$a={class:"tab-content"},Ma={class:"toolbar"},xa=["disabled"],Ta=["disabled"],Ua=["disabled"],Sa={class:"backup-list"},Va={key:0,class:"empty-state"},Aa={key:1,class:"backup-grid"},Ia={class:"backup-info"},Ba={class:"backup-name"},Da={class:"backup-meta"},Pa={class:"backup-size"},La={class:"backup-date"},Wa={key:0,class:"backup-signed",title:"å·²ç­¾åéªŒè¯"},za={key:1,class:"backup-unsigned",title:"æœªç­¾åï¼ˆå¤–éƒ¨ä¸Šä¼ ï¼‰"},Ea={class:"backup-actions"},Ka=["onClick"],Na=["onClick"],Ra=["onClick"],Fa=["onClick"],Oa={class:"tab-content"},Ha={class:"toolbar"},Ga=["disabled"],ja=["disabled"],qa={key:1,class:"info-box"},Ja={class:"backup-list"},Qa={key:0,class:"empty-state"},Xa={key:1,class:"backup-grid"},Ya={class:"backup-info"},Za={class:"backup-name"},eo={class:"backup-meta"},to={class:"backup-size"},so={class:"backup-date"},lo={class:"backup-actions"},no=["onClick"],ao=["onClick"],oo={class:"tab-content"},io={class:"config-section"},ro={class:"config-card"},uo={class:"config-header"},co={class:"switch"},vo={key:0,class:"config-fields"},po={class:"field-row"},mo={class:"field-row"},fo={class:"config-card"},ho={class:"config-header"},go={class:"switch"},bo={key:0,class:"config-fields"},ko={class:"field-row"},yo={class:"time-input"},wo={class:"field-row"},_o={class:"field-row checkbox-row"},Co={class:"checkbox-label"},$o={class:"config-card"},Mo={class:"config-header"},xo={class:"switch"},To={class:"config-info"},Uo={key:0,class:"warning-text"},So={key:0,class:"config-fields"},Vo={class:"field-row checkbox-row"},Ao={class:"checkbox-label"},Io={class:"field-row checkbox-row"},Bo={class:"checkbox-label"},Do={class:"config-card"},Po={class:"config-header"},Lo={class:"switch"},Wo={key:0,class:"stats-card"},zo={class:"stats-grid"},Eo={class:"stat-item"},Ko={class:"stat-value"},No={class:"stat-item"},Ro={class:"stat-value"},Fo={class:"stat-item"},Oo={class:"stat-value"},Ho={class:"stat-item"},Go={class:"stat-value"},jo={class:"config-actions"},qo=["disabled"],Jo={key:0,class:"modal-overlay"},Qo={class:"modal-content config-modal"},Xo={class:"form-group"},Yo={class:"form-group"},Zo={class:"form-group"},ei=["placeholder"],ti={key:0},si={key:1},li={class:"modal-actions"},ni=["disabled"],ai={key:1,class:"modal-overlay"},oi={class:"modal-content"},ii={style:{"white-space":"pre-line"}},ri={class:"modal-actions"},di=["disabled"],ui=["disabled"],ci={key:2,class:"modal-overlay"},vi={class:"modal-content config-modal"},pi={class:"form-group"},mi={class:"form-group"},fi={class:"modal-actions"},hi=["disabled"],gi={key:3,class:"modal-overlay"},bi={class:"modal-content config-modal"},ki={class:"form-group"},yi={class:"modal-actions"},wi=["disabled"],_i={__name:"BackupManage",setup(i){const t=$("local"),r=$([]),M=$([]),s=$(!1),u=$(!1),P=$(!1),n=$(null),c=oe({create:!1,list:!1,delete:!1,restore:!1,upload:!1,rename:!1,webdavConfig:!1,webdavBackup:!1,webdavList:!1,webdavRestore:!1,webdavDelete:!1,autoBackupConfig:!1}),g=oe({name:"",description:""}),_=oe({oldName:"",newName:""}),k=$({text:"",type:""}),S=oe({show:!1,filename:"",action:null,title:"",message:"",confirmClass:"",signed:!0,processing:!1}),b=oe({configured:!1,url:"",username:""}),m=oe({url:"",username:"",password:""}),f=oe({debounce:{enabled:!0,delay:5,keep:5},scheduled:{enabled:!0,hour:2,minute:0,keep:7,onlyIfModified:!0},webdav:{enabled:!1,syncDaily:!0,syncIncremental:!0},autoClean:!0}),v=$(null),A=localStorage.getItem("token");function U(G){return T(this,arguments,function*(y,l={}){return(yield fetch(y,ae(Q({},l),{headers:Q({Authorization:`Bearer ${A}`,"Content-Type":"application/json"},l.headers)}))).json()})}const V=(y,l="success",G=4e3)=>{k.value={text:y,type:l},setTimeout(()=>{k.value={text:"",type:""}},l==="error"?6e3:G)};function H(){try{window.dispatchEvent(new CustomEvent("nav-menus-updated")),console.log("[å¤‡ä»½ç®¡ç†] å·²é€šçŸ¥æ‰©å±•åˆ·æ–°å³é”®èœå•")}catch(y){console.warn("[å¤‡ä»½ç®¡ç†] é€šçŸ¥æ‰©å±•å¤±è´¥:",y)}}function X(){return T(this,null,function*(){try{const y=yield U("/api/ai/config/verify");y.success&&(y.status==="decrypt_failed"?(V("âš ï¸ AI é…ç½®æ¢å¤å¼‚å¸¸ï¼šAPI Key è§£å¯†å¤±è´¥ï¼Œè¯·å‰å¾€ AI è®¾ç½®é‡æ–°é…ç½®","warning",8e3),setTimeout(()=>{confirm(`AI é…ç½®çš„ API Key è§£å¯†å¤±è´¥ï¼Œå¯èƒ½æ˜¯å› ä¸ºå¤‡ä»½æ¥è‡ªä¸åŒçš„æœåŠ¡å™¨ã€‚

æ˜¯å¦ç°åœ¨å‰å¾€ AI è®¾ç½®é¡µé¢é‡æ–°é…ç½®ï¼Ÿ`)&&(window.location.href="/admin/ai-settings")},1e3)):y.status==="ok"&&console.log("[å¤‡ä»½ç®¡ç†] AI é…ç½®éªŒè¯é€šè¿‡"))}catch(y){console.warn("[å¤‡ä»½ç®¡ç†] AI é…ç½®éªŒè¯å¤±è´¥:",y)}})}const ee=()=>{g.name="",g.description="",u.value=!0},te=()=>T(null,null,function*(){c.create=!0;const y=yield U("/api/backup/create",{method:"POST",body:JSON.stringify({name:g.name||null,description:g.description||null})});y.success?(V("å¤‡ä»½åˆ›å»ºæˆåŠŸï¼"),u.value=!1,yield N()):V(y.message||"å¤‡ä»½åˆ›å»ºå¤±è´¥","error"),c.create=!1}),le=y=>{_.oldName=y,_.newName=y.replace(".zip",""),P.value=!0},se=()=>T(null,null,function*(){if(!_.newName.trim()){V("è¯·è¾“å…¥æ–°åç§°","error");return}c.rename=!0;const y=yield U(`/api/backup/rename/${_.oldName}`,{method:"PUT",body:JSON.stringify({newName:_.newName})});y.success?(V("é‡å‘½åæˆåŠŸï¼"),P.value=!1,yield N()):V(y.message||"é‡å‘½åå¤±è´¥","error"),c.rename=!1}),N=()=>T(null,null,function*(){c.list=!0;const y=yield U("/api/backup/list");y.success?r.value=y.backups:V("è·å–å¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),c.list=!1}),z=y=>{window.open(`/api/backup/download/${y}?token=${A}`,"_blank")},w=(y,l)=>{const G=typeof l=="object"?l:{name:l},x=G.name;S.show=!0,S.filename=x,S.action=y,S.signed=G.signed,S.processing=!1,y==="delete"?(S.title="åˆ é™¤",S.message=`ç¡®å®šè¦åˆ é™¤å¤‡ä»½æ–‡ä»¶ ${x} å—ï¼Ÿ`,S.confirmClass="btn-danger"):y==="restore"?(S.title="æ¢å¤",G.signed?S.message=`ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${x} å—ï¼Ÿ`:S.message=`âš ï¸ è­¦å‘Šï¼šæ­¤å¤‡ä»½æ–‡ä»¶æœªç­¾åï¼ˆå¯èƒ½æ˜¯å¤–éƒ¨ä¸Šä¼ çš„ï¼‰ï¼Œæ— æ³•éªŒè¯å…¶å®Œæ•´æ€§ã€‚

ç¡®å®šè¦æ¢å¤å¤‡ä»½æ–‡ä»¶ ${x} å—ï¼Ÿ`,S.confirmClass="btn-restore"):y==="webdav-restore"?(S.title="ä»WebDAVæ¢å¤",S.message=`ç¡®å®šè¦ä»WebDAVæ¢å¤å¤‡ä»½ ${x} å—ï¼Ÿè¿™å°†è¦†ç›–å½“å‰æ•°æ®ã€‚`,S.confirmClass="btn-restore"):y==="webdav-delete"&&(S.title="åˆ é™¤WebDAVå¤‡ä»½",S.message=`ç¡®å®šè¦åˆ é™¤WebDAVå¤‡ä»½ ${x} å—ï¼Ÿ`,S.confirmClass="btn-danger")},B=()=>T(null,null,function*(){const{action:y,filename:l,signed:G}=S;S.show=!1,S.processing=!1;try{if(y==="delete"){V("æ­£åœ¨åˆ é™¤å¤‡ä»½...");const x=yield U(`/api/backup/delete/${l}`,{method:"DELETE"});x.success?(V("âœ“ åˆ é™¤æˆåŠŸ"),yield N()):V("âœ— "+(x.message||"åˆ é™¤å¤±è´¥"),"error")}else if(y==="restore"){V("æ­£åœ¨æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™...");const x=G?{}:{forceRestore:!0},j=yield U(`/api/backup/restore/${l}`,{method:"POST",body:JSON.stringify(x)});if(j.success)V("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(ue=>setTimeout(ue,2e3)),yield Promise.all([N(),J(),Z(),L()]),H(),j.checkAIConfig&&(yield X()),V("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3);else if(j.requireConfirm&&j.code==="NO_SIGNATURE"){if(confirm(j.message+`

ç‚¹å‡»"ç¡®å®š"ç»§ç»­æ¢å¤ï¼Œç‚¹å‡»"å–æ¶ˆ"æ”¾å¼ƒæ“ä½œã€‚`)){const ue=yield U(`/api/backup/restore/${l}`,{method:"POST",body:JSON.stringify({forceRestore:!0})});ue.success?(V("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(Ke=>setTimeout(Ke,2e3)),yield Promise.all([N(),J(),Z(),L()]),H(),ue.checkAIConfig&&(yield X()),V("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):V("âœ— "+(ue.message||"æ¢å¤å¤±è´¥"),"error")}}else V("âœ— "+(j.message||"æ¢å¤å¤±è´¥"),"error")}else y==="webdav-restore"?yield he(l):y==="webdav-delete"&&(yield ge(l))}catch(x){V("âœ— æ“ä½œå¤±è´¥: "+x.message,"error")}}),D=y=>y?new Date(y).toLocaleString("zh-CN",{hour12:!1}):"--",h=()=>{n.value.click()},p=y=>T(null,null,function*(){const l=y.target.files[0];if(l){if(!l.name.endsWith(".zip")){V("åªæ”¯æŒ.zipæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶","error"),y.target.value="";return}if(l.size>500*1024*1024){V("å¤‡ä»½æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ500MB","error"),y.target.value="";return}c.upload=!0;try{const G=new FormData;G.append("backup",l);const j=yield(yield fetch("/api/backup/upload",{method:"POST",headers:{Authorization:`Bearer ${A}`},body:G})).json();j.success?(V("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),yield N()):V(j.message||"å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}catch(G){console.error("ä¸Šä¼ å¤±è´¥:",G),V("å¤‡ä»½æ–‡ä»¶ä¸Šä¼ å¤±è´¥","error")}finally{c.upload=!1,y.target.value=""}}}),J=()=>T(null,null,function*(){const y=yield U("/api/backup/webdav/config");y.success&&y.config&&(b.configured=y.config.configured,b.url=y.config.url||"",b.username=y.config.username||"")}),ve=()=>T(null,null,function*(){yield J(),m.url=b.url,m.username=b.username,m.password="",s.value=!0}),pe=()=>T(null,null,function*(){if(!m.url||!m.username){V("è¯·å¡«å†™URLå’Œç”¨æˆ·å","error");return}if(!b.configured&&!m.password){V("é¦–æ¬¡é…ç½®æ—¶å¯†ç ä¸èƒ½ä¸ºç©º","error");return}c.webdavConfig=!0;const y=yield U("/api/backup/webdav/config",{method:"POST",body:JSON.stringify(m)});y.success?(s.value=!1,yield J(),b.configured?(yield Z(),yield L(),f.webdav.enabled?V("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼"):(f.webdav.enabled=!0,(yield U("/api/backup/auto/config",{method:"POST",body:JSON.stringify(f)})).success?V("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼Œå·²è‡ªåŠ¨å¼€å¯WebDAVè‡ªåŠ¨åŒæ­¥ï¼"):V("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼Œä½†è‡ªåŠ¨åŒæ­¥å¼€å¯å¤±è´¥","error"))):V("WebDAVé…ç½®ä¿å­˜æˆåŠŸï¼")):V(y.message||"WebDAVé…ç½®ä¿å­˜å¤±è´¥","error"),c.webdavConfig=!1}),me=()=>T(null,null,function*(){c.webdavBackup=!0;const y=yield U("/api/backup/webdav/backup",{method:"POST"});y.success?(V("å¤‡ä»½åˆ°WebDAVæˆåŠŸï¼"),yield Z()):(V(y.message||"å¤‡ä»½åˆ°WebDAVå¤±è´¥","error"),y.needReconfigure&&(b.configured=!1,b.url="",b.username="")),c.webdavBackup=!1}),fe=y=>{y.target.checked&&!b.configured&&(f.webdav.enabled=!1,V('è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®WebDAVè¿æ¥',"error"),t.value="webdav")},Z=()=>T(null,null,function*(){c.webdavList=!0;const y=yield U("/api/backup/webdav/list");y.success?(M.value=y.backups||[],y.configured===!1&&(b.configured=!1,b.url="",b.username="",y.message&&V(y.message,"error"))):V(y.message||"è·å–WebDAVå¤‡ä»½åˆ—è¡¨å¤±è´¥","error"),c.webdavList=!1}),he=y=>T(null,null,function*(){V("æ­£åœ¨ä» WebDAV æ¢å¤å¤‡ä»½ï¼Œè¯·ç¨å€™..."),c.webdavRestore=!0;try{const l=yield U("/api/backup/webdav/restore",{method:"POST",body:JSON.stringify({filename:y})});l.success?(V("âœ“ å¤‡ä»½å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åŠ è½½æ•°æ®..."),yield new Promise(G=>setTimeout(G,2e3)),yield Promise.all([N(),J(),Z(),L()]),H(),l.checkAIConfig&&(yield X()),V("âœ“ æ¢å¤å®Œæˆï¼æ•°æ®å·²æ›´æ–°","success",5e3)):(V("âœ— "+(l.message||"ä» WebDAV æ¢å¤å¤±è´¥"),"error"),l.needReconfigure&&(b.configured=!1,b.url="",b.username=""))}catch(l){V("âœ— æ¢å¤å¤±è´¥: "+l.message,"error")}finally{c.webdavRestore=!1}}),ge=y=>T(null,null,function*(){V("æ­£åœ¨åˆ é™¤ WebDAV å¤‡ä»½..."),c.webdavDelete=!0;try{const l=yield U(`/api/backup/webdav/delete/${y}`,{method:"DELETE"});l.success?(V("âœ“ åˆ é™¤æˆåŠŸ"),yield Z()):(V("âœ— "+(l.message||"åˆ é™¤å¤±è´¥"),"error"),l.needReconfigure&&(b.configured=!1,b.url="",b.username=""))}catch(l){V("âœ— åˆ é™¤å¤±è´¥: "+l.message,"error")}finally{c.webdavDelete=!1}}),L=()=>T(null,null,function*(){const y=yield U("/api/backup/auto/config");y.success&&y.config?(Object.assign(f,y.config),v.value=y.stats||null):V("åŠ è½½è‡ªåŠ¨å¤‡ä»½é…ç½®å¤±è´¥","error")}),O=()=>T(null,null,function*(){c.autoBackupConfig=!0;const y=yield U("/api/backup/auto/config",{method:"POST",body:JSON.stringify(f)});y.success?(V("è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜æˆåŠŸï¼"),yield L()):V(y.message||"è‡ªåŠ¨å¤‡ä»½é…ç½®ä¿å­˜å¤±è´¥","error"),c.autoBackupConfig=!1}),ze=()=>{if(!f.scheduled.enabled)return"æœªå¯ç”¨";const y=String(f.scheduled.hour).padStart(2,"0"),l=String(f.scheduled.minute).padStart(2,"0");return`æ¯å¤© ${y}:${l}`},Ee=()=>{confirm("ç¡®å®šè¦æ¢å¤ä¸ºé»˜è®¤é…ç½®å—ï¼Ÿè¿™å°†é‡ç½®æ‰€æœ‰è‡ªåŠ¨å¤‡ä»½è®¾ç½®ã€‚")&&(f.debounce={enabled:!0,delay:5,keep:5},f.scheduled={enabled:!0,hour:2,minute:0,keep:7,onlyIfModified:!0},f.webdav={enabled:!1,syncDaily:!0,syncIncremental:!0},f.autoClean=!0,V('å·²æ¢å¤é»˜è®¤é…ç½®ï¼Œè¯·ç‚¹å‡»"ä¿å­˜é…ç½®"ä»¥ç”Ÿæ•ˆ'))};return ne(()=>T(null,null,function*(){yield N(),yield J(),b.configured&&(yield Z()),yield L()})),(y,l)=>{var G;return a(),o("div",_a,[e("div",Ca,[e("button",{class:K(["tab",{active:t.value==="local"}]),onClick:l[0]||(l[0]=x=>t.value="local")}," ğŸ“¦ æœ¬åœ°å¤‡ä»½ ",2),e("button",{class:K(["tab",{active:t.value==="webdav"}]),onClick:l[1]||(l[1]=x=>t.value="webdav")}," â˜ï¸ WebDAVå¤‡ä»½ ",2),e("button",{class:K(["tab",{active:t.value==="auto"}]),onClick:l[2]||(l[2]=x=>t.value="auto")}," âš™ï¸ è‡ªåŠ¨å¤‡ä»½é…ç½® ",2)]),C(e("div",$a,[e("div",Ma,[e("button",{class:"btn btn-primary",onClick:ee,disabled:c.create},[l[25]||(l[25]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),E(" "+d(c.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),1)],8,xa),e("button",{class:"btn btn-success",onClick:h,disabled:c.upload},[l[26]||(l[26]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 15V3"})],-1)),E(" "+d(c.upload?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å¤‡ä»½"),1)],8,Ta),e("button",{class:"btn btn-secondary",onClick:N,disabled:c.list},[l[27]||(l[27]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),E(" "+d(c.list?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,Ua),e("input",{ref_key:"fileInput",ref:n,type:"file",accept:".zip",onChange:p,style:{display:"none"}},null,544)]),k.value.text?(a(),o("div",{key:0,class:K(["message",k.value.type])},d(k.value.text),3)):I("",!0),e("div",Sa,[r.value.length===0&&!c.list?(a(),o("div",Va,[...l[28]||(l[28]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— å¤‡ä»½æ–‡ä»¶",-1)])])):(a(),o("div",Aa,[(a(!0),o(R,null,F(r.value,x=>(a(),o("div",{key:x.name,class:"backup-card"},[l[33]||(l[33]=e("div",{class:"backup-icon"},[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",Ia,[e("div",Ba,d(x.name),1),e("div",Da,[e("span",Pa,d(x.size),1),e("span",La,d(D(x.created)),1),x.signed?(a(),o("span",Wa,"ğŸ”’")):(a(),o("span",za,"âš ï¸"))])]),e("div",Ea,[e("button",{class:"btn-icon btn-restore",onClick:j=>w("restore",x),title:"æ¢å¤å¤‡ä»½"},[...l[29]||(l[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,Ka),e("button",{class:"btn-icon btn-rename",onClick:j=>le(x.name),title:"é‡å‘½å"},[...l[30]||(l[30]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Na),e("button",{class:"btn-icon",onClick:j=>z(x.name),title:"ä¸‹è½½å¤‡ä»½"},[...l[31]||(l[31]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)])],8,Ra),e("button",{class:"btn-icon btn-danger",onClick:j=>w("delete",x.name),title:"åˆ é™¤å¤‡ä»½"},[...l[32]||(l[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Fa)])]))),128))]))])],512),[[we,t.value==="local"]]),C(e("div",Oa,[e("div",Ha,[e("button",{class:"btn btn-primary",onClick:ve},[...l[34]||(l[34]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"})],-1),E(" WebDAVé…ç½® ",-1)])]),e("button",{class:"btn btn-primary",onClick:me,disabled:c.webdavBackup||!b.configured},[l[35]||(l[35]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})],-1)),E(" "+d(c.webdavBackup?"å¤‡ä»½ä¸­...":"å¤‡ä»½åˆ°WebDAV"),1)],8,Ga),e("button",{class:"btn btn-secondary",onClick:Z,disabled:c.webdavList||!b.configured},[l[36]||(l[36]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)),E(" "+d(c.webdavList?"åˆ·æ–°ä¸­...":"åˆ·æ–°åˆ—è¡¨"),1)],8,ja)]),k.value.text?(a(),o("div",{key:0,class:K(["message",k.value.type])},d(k.value.text),3)):I("",!0),b.configured?I("",!0):(a(),o("div",qa,[...l[37]||(l[37]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1),e("p",null,"è¯·å…ˆé…ç½®WebDAVè¿æ¥ä¿¡æ¯ï¼ˆæ”¯æŒï¼šåšæœäº‘ã€Nextcloudã€é˜¿é‡Œäº‘ç›˜WebDAVã€Dropboxç­‰ï¼‰",-1)])])),e("div",Ja,[M.value.length===0&&!c.webdavList?(a(),o("div",Qa,[...l[38]||(l[38]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ccc","stroke-width":"1.5"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),e("p",null,"æš‚æ— WebDAVå¤‡ä»½",-1)])])):(a(),o("div",Xa,[(a(!0),o(R,null,F(M.value,x=>(a(),o("div",{key:x.name,class:"backup-card"},[l[41]||(l[41]=re('<div class="backup-icon" data-v-19fdb4a7><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" data-v-19fdb4a7><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-19fdb4a7></path><polyline points="14 2 14 8 20 8" data-v-19fdb4a7></polyline><path d="M12 18v-6M9 15l3 3 3-3" data-v-19fdb4a7></path></svg></div>',1)),e("div",Ya,[e("div",Za,d(x.name),1),e("div",eo,[e("span",to,d(x.size),1),e("span",so,d(D(x.created)),1)])]),e("div",lo,[e("button",{class:"btn-icon btn-restore",onClick:j=>w("webdav-restore",x.name),title:"ä»WebDAVæ¢å¤"},[...l[39]||(l[39]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1)])],8,no),e("button",{class:"btn-icon btn-danger",onClick:j=>w("webdav-delete",x.name),title:"åˆ é™¤WebDAVå¤‡ä»½"},[...l[40]||(l[40]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,ao)])]))),128))]))])],512),[[we,t.value==="webdav"]]),C(e("div",oo,[k.value.text?(a(),o("div",{key:0,class:K(["message",k.value.type])},d(k.value.text),3)):I("",!0),e("div",io,[l[76]||(l[76]=e("h3",null,"âš¡ è‡ªåŠ¨å¤‡ä»½é…ç½®",-1)),l[77]||(l[77]=e("p",{class:"config-description"},"é…ç½®ç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ç­–ç•¥ï¼ŒåŒ…æ‹¬å¢é‡å¤‡ä»½å’Œå®šæ—¶å¤‡ä»½ã€‚",-1)),e("div",ro,[e("div",uo,[l[43]||(l[43]=e("h4",null,"å¢é‡å¤‡ä»½ï¼ˆé˜²æŠ–ï¼‰",-1)),e("label",co,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=x=>f.debounce.enabled=x)},null,512),[[q,f.debounce.enabled]]),l[42]||(l[42]=e("span",{class:"slider"},null,-1))])]),l[48]||(l[48]=e("p",{class:"config-info"},"å½“æ•°æ®å˜æ›´æ—¶ï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤‡ä»½ã€‚é€‚åˆé¢‘ç¹ä¿®æ”¹çš„åœºæ™¯ã€‚",-1)),f.debounce.enabled?(a(),o("div",vo,[e("div",po,[l[44]||(l[44]=e("label",null,"å»¶è¿Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰",-1)),C(e("input",{type:"number","onUpdate:modelValue":l[4]||(l[4]=x=>f.debounce.delay=x),min:"5",max:"1440",class:"form-input"},null,512),[[W,f.debounce.delay,void 0,{number:!0}]]),l[45]||(l[45]=e("small",null,"æ•°æ®ä¿®æ”¹åå»¶è¿Ÿå¤šä¹…è§¦å‘å¤‡ä»½ï¼ŒèŒƒå›´ï¼š5-1440åˆ†é’Ÿ",-1))]),e("div",mo,[l[46]||(l[46]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),C(e("input",{type:"number","onUpdate:modelValue":l[5]||(l[5]=x=>f.debounce.keep=x),min:"1",max:"30",class:"form-input"},null,512),[[W,f.debounce.keep,void 0,{number:!0}]]),l[47]||(l[47]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))])])):I("",!0)]),e("div",fo,[e("div",ho,[l[50]||(l[50]=e("h4",null,"å®šæ—¶å¤‡ä»½ï¼ˆæ¯æ—¥ï¼‰",-1)),e("label",go,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=x=>f.scheduled.enabled=x)},null,512),[[q,f.scheduled.enabled]]),l[49]||(l[49]=e("span",{class:"slider"},null,-1))])]),l[58]||(l[58]=e("p",{class:"config-info"},"æ¯å¤©åœ¨å›ºå®šæ—¶é—´è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚",-1)),f.scheduled.enabled?(a(),o("div",bo,[e("div",ko,[l[52]||(l[52]=e("label",null,"å¤‡ä»½æ—¶é—´",-1)),e("div",yo,[C(e("input",{type:"number","onUpdate:modelValue":l[7]||(l[7]=x=>f.scheduled.hour=x),min:"0",max:"23",class:"form-input time-field",placeholder:"æ—¶"},null,512),[[W,f.scheduled.hour,void 0,{number:!0}]]),l[51]||(l[51]=e("span",null,":",-1)),C(e("input",{type:"number","onUpdate:modelValue":l[8]||(l[8]=x=>f.scheduled.minute=x),min:"0",max:"59",class:"form-input time-field",placeholder:"åˆ†"},null,512),[[W,f.scheduled.minute,void 0,{number:!0}]])]),l[53]||(l[53]=e("small",null,"æ ¼å¼ï¼š24å°æ—¶åˆ¶ï¼Œå¦‚ 02:00",-1))]),e("div",wo,[l[54]||(l[54]=e("label",null,"ä¿ç•™å¤‡ä»½æ•°é‡",-1)),C(e("input",{type:"number","onUpdate:modelValue":l[9]||(l[9]=x=>f.scheduled.keep=x),min:"1",max:"30",class:"form-input"},null,512),[[W,f.scheduled.keep,void 0,{number:!0}]]),l[55]||(l[55]=e("small",null,"è‡ªåŠ¨æ¸…ç†æ—¶ä¿ç•™æœ€æ–°çš„Nä¸ªå¤‡ä»½ï¼ŒèŒƒå›´ï¼š1-30ä¸ª",-1))]),e("div",_o,[e("label",Co,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[10]||(l[10]=x=>f.scheduled.onlyIfModified=x)},null,512),[[q,f.scheduled.onlyIfModified]]),l[56]||(l[56]=e("span",null,"ä»…åœ¨æœ‰ä¿®æ”¹æ—¶å¤‡ä»½",-1))]),l[57]||(l[57]=e("small",null,"å¦‚æœ24å°æ—¶å†…å·²æœ‰å¢é‡å¤‡ä»½ï¼Œè·³è¿‡å®šæ—¶å¤‡ä»½ï¼ˆé¿å…é‡å¤ï¼‰",-1))])])):I("",!0)]),e("div",$o,[e("div",Mo,[l[60]||(l[60]=e("h4",null,"â˜ï¸ WebDAV è‡ªåŠ¨åŒæ­¥",-1)),e("label",xo,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[11]||(l[11]=x=>f.webdav.enabled=x),onChange:fe},null,544),[[q,f.webdav.enabled]]),l[59]||(l[59]=e("span",{class:"slider"},null,-1))])]),e("p",To,[l[61]||(l[61]=E(" è‡ªåŠ¨å°†æœ¬åœ°å¤‡ä»½åŒæ­¥åˆ° WebDAV äº‘ç«¯ã€‚ ",-1)),b.configured?I("",!0):(a(),o("span",Uo,'âš ï¸ è¯·å…ˆåœ¨"WebDAVå¤‡ä»½"æ ‡ç­¾é¡µé…ç½®è¿æ¥'))]),f.webdav.enabled?(a(),o("div",So,[e("div",Vo,[e("label",Ao,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=x=>f.webdav.syncDaily=x)},null,512),[[q,f.webdav.syncDaily]]),l[62]||(l[62]=e("span",null,"åŒæ­¥æ¯æ—¥å®šæ—¶å¤‡ä»½",-1))]),l[63]||(l[63]=e("small",null,"æ¯å¤©å®šæ—¶å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))]),e("div",Io,[e("label",Bo,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[13]||(l[13]=x=>f.webdav.syncIncremental=x)},null,512),[[q,f.webdav.syncIncremental]]),l[64]||(l[64]=e("span",null,"åŒæ­¥å¢é‡å¤‡ä»½",-1))]),l[65]||(l[65]=e("small",null,"å¢é‡å¤‡ä»½åè‡ªåŠ¨ä¸Šä¼ åˆ° WebDAV",-1))])])):I("",!0)]),e("div",Do,[e("div",Po,[l[67]||(l[67]=e("h4",null,"è‡ªåŠ¨æ¸…ç†",-1)),e("label",Lo,[C(e("input",{type:"checkbox","onUpdate:modelValue":l[14]||(l[14]=x=>f.autoClean=x)},null,512),[[q,f.autoClean]]),l[66]||(l[66]=e("span",{class:"slider"},null,-1))])]),l[68]||(l[68]=e("p",{class:"config-info"},"è‡ªåŠ¨åˆ é™¤è¶…å‡ºä¿ç•™æ•°é‡çš„æ—§å¤‡ä»½æ–‡ä»¶ï¼ˆæŒ‰æ—¶é—´æ’åºï¼Œä¿ç•™æœ€æ–°çš„ï¼‰ã€‚",-1))]),v.value?(a(),o("div",Wo,[l[73]||(l[73]=e("h4",null,"ğŸ“Š å¤‡ä»½ç»Ÿè®¡",-1)),e("div",zo,[e("div",Eo,[l[69]||(l[69]=e("span",{class:"stat-label"},"å¢é‡å¤‡ä»½æ•°é‡",-1)),e("span",Ko,d(((G=v.value.incremental)==null?void 0:G.count)||0)+" ä¸ª",1)]),e("div",No,[l[70]||(l[70]=e("span",{class:"stat-label"},"æœ€åå¢é‡å¤‡ä»½",-1)),e("span",Ro,d(D(v.value.lastDebounce)||"æ— "),1)]),e("div",Fo,[l[71]||(l[71]=e("span",{class:"stat-label"},"æœ€åå®šæ—¶å¤‡ä»½",-1)),e("span",Oo,d(D(v.value.lastScheduled)||"æ— "),1)]),e("div",Ho,[l[72]||(l[72]=e("span",{class:"stat-label"},"ä¸‹æ¬¡å®šæ—¶å¤‡ä»½",-1)),e("span",Go,d(ze()),1)])])])):I("",!0),e("div",jo,[e("button",{class:"btn btn-secondary",onClick:Ee},[...l[74]||(l[74]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M1 4v6h6M23 20v-6h-6"}),e("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})],-1),E(" æ¢å¤é»˜è®¤ ",-1)])]),e("button",{class:"btn btn-primary",onClick:O,disabled:c.autoBackupConfig},[l[75]||(l[75]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1)),E(" "+d(c.autoBackupConfig?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,qo)])])],512),[[we,t.value==="auto"]]),s.value?(a(),o("div",Jo,[e("div",Qo,[l[82]||(l[82]=e("h3",null,"WebDAVé…ç½®",-1)),e("div",Xo,[l[78]||(l[78]=e("label",null,[E("WebDAV URL "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":l[15]||(l[15]=x=>m.url=x),placeholder:"https://dav.jianguoyun.com/dav/",class:"form-input"},null,512),[[W,m.url]]),l[79]||(l[79]=e("small",null,"ä¾‹ï¼šåšæœäº‘ https://dav.jianguoyun.com/dav/",-1))]),e("div",Yo,[l[80]||(l[80]=e("label",null,[E("ç”¨æˆ·å "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":l[16]||(l[16]=x=>m.username=x),placeholder:"é‚®ç®±æˆ–ç”¨æˆ·å",class:"form-input"},null,512),[[W,m.username]])]),e("div",Zo,[l[81]||(l[81]=e("label",null,[E("å¯†ç  "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"password","onUpdate:modelValue":l[17]||(l[17]=x=>m.password=x),placeholder:b.configured?"ç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜":"åº”ç”¨å¯†ç æˆ–è®¿é—®ä»¤ç‰Œ",class:"form-input"},null,8,ei),[[W,m.password]]),b.configured?(a(),o("small",si,"å¦‚éœ€ä¿®æ”¹å¯†ç è¯·è¾“å…¥æ–°å¯†ç ï¼Œç•™ç©ºåˆ™ä¿æŒåŸå¯†ç ä¸å˜")):(a(),o("small",ti,"æ³¨æ„ï¼šæŸäº›æœåŠ¡éœ€è¦ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼Œè€Œä¸æ˜¯ç™»å½•å¯†ç "))]),e("div",li,[e("button",{class:"btn btn-secondary",onClick:l[18]||(l[18]=x=>s.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:pe,disabled:c.webdavConfig},d(c.webdavConfig?"æµ‹è¯•è¿æ¥ä¸­...":"ä¿å­˜"),9,ni)])])])):I("",!0),S.show?(a(),o("div",ai,[e("div",oi,[e("h3",null,"ç¡®è®¤"+d(S.title),1),e("p",ii,d(S.message),1),e("div",ri,[e("button",{class:"btn btn-secondary",onClick:l[19]||(l[19]=x=>S.show=!1),disabled:S.processing},"å–æ¶ˆ",8,di),e("button",{class:K(["btn",S.confirmClass]),onClick:B,disabled:S.processing},d(S.processing?"å¤„ç†ä¸­...":"ç¡®è®¤"),11,ui)])])])):I("",!0),u.value?(a(),o("div",ci,[e("div",vi,[l[86]||(l[86]=e("h3",null,"åˆ›å»ºå¤‡ä»½",-1)),e("div",pi,[l[83]||(l[83]=e("label",null,"å¤‡ä»½åç§°ï¼ˆå¯é€‰ï¼‰",-1)),C(e("input",{type:"text","onUpdate:modelValue":l[20]||(l[20]=x=>g.name=x),placeholder:"ä¾‹å¦‚ï¼šæ·»åŠ ä¹¦ç­¾åçš„å¤‡ä»½",class:"form-input",maxlength:"50"},null,512),[[W,g.name]]),l[84]||(l[84]=e("small",null,"ç•™ç©ºåˆ™ä½¿ç”¨é»˜è®¤åç§°ï¼ˆbackup-æ—¶é—´æˆ³ï¼‰",-1))]),e("div",mi,[l[85]||(l[85]=e("label",null,"å¤‡ä»½æè¿°ï¼ˆå¯é€‰ï¼‰",-1)),C(e("textarea",{"onUpdate:modelValue":l[21]||(l[21]=x=>g.description=x),placeholder:"æè¿°è¿™æ¬¡å¤‡ä»½çš„å†…å®¹æˆ–ç›®çš„...",class:"form-input",rows:"3"},null,512),[[W,g.description]])]),e("div",fi,[e("button",{class:"btn btn-secondary",onClick:l[22]||(l[22]=x=>u.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:te,disabled:c.create},d(c.create?"å¤‡ä»½ä¸­...":"åˆ›å»ºå¤‡ä»½"),9,hi)])])])):I("",!0),P.value?(a(),o("div",gi,[e("div",bi,[l[88]||(l[88]=e("h3",null,"é‡å‘½åå¤‡ä»½",-1)),e("div",ki,[l[87]||(l[87]=e("label",null,[E("æ–°åç§° "),e("span",{class:"required"},"*")],-1)),C(e("input",{type:"text","onUpdate:modelValue":l[23]||(l[23]=x=>_.newName=x),placeholder:"è¾“å…¥æ–°çš„å¤‡ä»½åç§°",class:"form-input",maxlength:"50"},null,512),[[W,_.newName]]),e("small",null,"åŸåç§°ï¼š"+d(_.oldName),1)]),e("div",yi,[e("button",{class:"btn btn-secondary",onClick:l[24]||(l[24]=x=>P.value=!1)},"å–æ¶ˆ"),e("button",{class:"btn btn-primary",onClick:se,disabled:c.rename||!_.newName.trim()},d(c.rename?"é‡å‘½åä¸­...":"ç¡®è®¤é‡å‘½å"),9,wi)])])])):I("",!0)])}}},Ci=Y(_i,[["__scopeId","data-v-19fdb4a7"]]),$i={name:"AIBatchWizard",props:{visible:Boolean,activeTask:{type:Object,default:()=>({running:!1})}},emits:["close","start"],data(){return{step:0,stepNames:["é€‰æ‹©èŒƒå›´","ç”Ÿæˆç­–ç•¥","æ•ˆæœé¢„è§ˆ","æ‰§è¡Œä»»åŠ¡"],fieldLabels:{name:"åç§°",description:"æè¿°",tags:"æ ‡ç­¾"},menus:[],subMenus:[],tags:[],filters:{status:["empty_name","empty_desc"],menuId:"",subMenuId:""},filteredCards:[],filtering:!1,strategy:{types:["name","description"],mode:"fill",style:"default",customPrompt:""},previews:[],previewing:!1,taskDone:!1,localTaskStatus:{current:0,total:0,successCount:0,failCount:0,currentCard:"",errors:[]},starting:!1,stopping:!1,eventSource:null}},computed:{canNext(){return this.step===0?this.filteredCards.length>0:this.step===1?this.strategy.types.length>0:!0},taskStatus(){return this.activeTask.running?this.activeTask:this.localTaskStatus},taskRunning(){return this.activeTask.running},progressPercent(){const i=this.taskStatus;return i.total?Math.round(i.current/i.total*100):0}},watch:{visible(i){i&&this.init()},"activeTask.running"(i,t){t===!0&&i===!1&&this.step===3&&(this.taskDone=!0)},activeTask:{handler(i){i&&i.running&&(this.localTaskStatus=Q({},i))},deep:!0}},methods:{init(){return T(this,null,function*(){this.step=0,this.previews=[],this.taskDone=!1,this.localTaskStatus={current:0,total:0,successCount:0,failCount:0,currentCard:"",errors:[]};try{const[i,t]=yield Promise.all([xe(),Te()]);this.menus=i.data||[],this.tags=t.data||[]}catch(i){}this.applyFilter()})},onMenuChange(){return T(this,null,function*(){this.filters.subMenuId="";const i=this.menus.find(t=>t.id===this.filters.menuId);this.subMenus=(i==null?void 0:i.subMenus)||[],this.applyFilter()})},applyFilter(){return T(this,null,function*(){this.filtering=!0;try{const i={status:this.filters.status};this.filters.menuId&&(i.menuIds=[this.filters.menuId]),this.filters.subMenuId&&(i.subMenuIds=[this.filters.subMenuId]);const{data:t}=yield wt(i);this.filteredCards=t.cards||[]}catch(i){this.filteredCards=[]}this.filtering=!1})},nextStep(){this.step<3&&this.step++},runPreview(){return T(this,null,function*(){var i,t;this.previewing=!0,this.previews=[];try{const r=this.filteredCards.slice(0,3).map(s=>s.id),{data:M}=yield yt({cardIds:r,types:this.strategy.types,strategy:{mode:this.strategy.mode,style:this.strategy.style,customPrompt:this.strategy.customPrompt}});this.previews=M.previews||[]}catch(r){alert("é¢„è§ˆå¤±è´¥: "+(((t=(i=r.response)==null?void 0:i.data)==null?void 0:t.message)||r.message))}this.previewing=!1})},startTask(){return T(this,null,function*(){yield this.doStartTask(this.filteredCards.map(i=>i.id))})},retryCard(i){return T(this,null,function*(){i.cardId&&(yield this.doStartTask([i.cardId]))})},retryAllFailed(){return T(this,null,function*(){const i=this.taskStatus.errors.map(t=>t.cardId).filter(t=>!!t);i.length!==0&&(yield this.doStartTask(i))})},doStartTask(i){return T(this,null,function*(){var t,r;this.starting=!0,this.taskDone=!1;try{const M={cardIds:i,types:this.strategy.types,strategy:{mode:this.strategy.mode,style:this.strategy.style,customPrompt:this.strategy.customPrompt}};this.$emit("start",{total:M.cardIds.length,types:M.types,mode:M.strategy.mode,current:0,currentCard:"å¯åŠ¨ä¸­...",errors:[]});const{data:s}=yield Me(M);(!s.success||s.total===0)&&(alert(s.message||"æ²¡æœ‰éœ€è¦å¤„ç†çš„å¡ç‰‡"),i.length===this.filteredCards.length&&this.$emit("close"))}catch(M){alert("å¯åŠ¨å¤±è´¥: "+(((r=(t=M.response)==null?void 0:t.data)==null?void 0:r.message)||M.message))}this.starting=!1})},stopTask(){return T(this,null,function*(){this.stopping=!0;try{yield We()}catch(i){}setTimeout(()=>{this.stopping=!1},2e3)})},extractDomain(i){try{return new URL(i).hostname.replace("www.","")}catch(t){return i}}}},Mi={class:"wizard-modal"},xi={class:"wizard-header"},Ti={class:"steps"},Ui={class:"step-num"},Si={class:"step-name"},Vi={class:"wizard-body"},Ai={key:0,class:"step-content"},Ii={class:"filter-section"},Bi={class:"checkbox-group"},Di={class:"filter-section"},Pi=["value"],Li=["value"],Wi={class:"filter-result"},zi={class:"result-count"},Ei=["disabled"],Ki={key:0,class:"card-preview-list"},Ni={class:"card-title"},Ri={class:"card-url"},Fi={key:0,class:"more-hint"},Oi={key:1,class:"step-content"},Hi={class:"filter-section"},Gi={class:"checkbox-group"},ji={class:"filter-section"},qi={class:"radio-group"},Ji={class:"filter-section"},Qi={class:"filter-section"},Xi={key:2,class:"step-content"},Yi={class:"preview-actions"},Zi=["disabled"],er={key:0,class:"preview-list"},tr={class:"preview-title"},sr={class:"field-label"},lr={class:"diff-view"},nr={class:"diff-old"},ar={key:1,class:"preview-hint"},or={key:3,class:"step-content"},ir={key:0,class:"execute-confirm"},rr=["disabled"],dr={key:1,class:"task-progress"},ur={class:"progress-header"},cr={class:"progress-bar"},vr={class:"progress-info"},pr={key:0},mr={key:1},fr={class:"task-stats"},hr={class:"stat success"},gr={class:"stat fail"},br=["disabled"],kr={key:0,class:"error-log-container"},yr={class:"error-log-header"},wr={class:"error-log"},_r={class:"error-info"},Cr=["title"],$r=["title"],Mr=["onClick","disabled"],xr={key:1,class:"task-actions"},Tr=["disabled"],Ur={class:"wizard-footer"},Sr=["disabled"],Vr={class:"footer-right"},Ar=["disabled"];function Ir(i,t,r,M,s,u){var P;return r.visible?(a(),o("div",{key:0,class:"wizard-overlay",onClick:t[27]||(t[27]=ye(n=>i.$emit("close"),["self"]))},[e("div",Mi,[e("div",xi,[t[28]||(t[28]=e("h3",null,"ğŸ¤– AI æ‰¹é‡ç”Ÿæˆå‘å¯¼",-1)),e("button",{class:"close-btn",onClick:t[0]||(t[0]=n=>i.$emit("close"))},"âœ•")]),e("div",Ti,[(a(!0),o(R,null,F(s.stepNames,(n,c)=>(a(),o("div",{key:c,class:K(["step",{active:s.step===c,done:s.step>c}])},[e("span",Ui,d(s.step>c?"âœ“":c+1),1),e("span",Si,d(n),1)],2))),128))]),e("div",Vi,[s.step===0?(a(),o("div",Ai,[e("div",Ii,[t[32]||(t[32]=e("h4",null,"çŠ¶æ€ç­›é€‰",-1)),e("div",Bi,[e("label",null,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=n=>s.filters.status=n),value:"empty_name",onChange:t[2]||(t[2]=(...n)=>u.applyFilter&&u.applyFilter(...n))},null,544),[[q,s.filters.status]]),t[29]||(t[29]=E(" ç¼ºåç§°",-1))]),e("label",null,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=n=>s.filters.status=n),value:"empty_desc",onChange:t[4]||(t[4]=(...n)=>u.applyFilter&&u.applyFilter(...n))},null,544),[[q,s.filters.status]]),t[30]||(t[30]=E(" ç¼ºæè¿°",-1))]),e("label",null,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=n=>s.filters.status=n),value:"empty_tags",onChange:t[6]||(t[6]=(...n)=>u.applyFilter&&u.applyFilter(...n))},null,544),[[q,s.filters.status]]),t[31]||(t[31]=E(" ç¼ºæ ‡ç­¾",-1))])])]),e("div",Di,[t[35]||(t[35]=e("h4",null,"èœå•ç­›é€‰",-1)),C(e("select",{"onUpdate:modelValue":t[7]||(t[7]=n=>s.filters.menuId=n),onChange:t[8]||(t[8]=(...n)=>u.onMenuChange&&u.onMenuChange(...n)),class:"input"},[t[33]||(t[33]=e("option",{value:""},"å…¨éƒ¨èœå•",-1)),(a(!0),o(R,null,F(s.menus,n=>(a(),o("option",{key:n.id,value:n.id},d(n.name),9,Pi))),128))],544),[[ie,s.filters.menuId]]),s.subMenus.length?C((a(),o("select",{key:0,"onUpdate:modelValue":t[9]||(t[9]=n=>s.filters.subMenuId=n),onChange:t[10]||(t[10]=(...n)=>u.applyFilter&&u.applyFilter(...n)),class:"input",style:{"margin-top":"8px"}},[t[34]||(t[34]=e("option",{value:""},"å…¨éƒ¨å­èœå•",-1)),(a(!0),o(R,null,F(s.subMenus,n=>(a(),o("option",{key:n.id,value:n.id},d(n.name),9,Li))),128))],544)),[[ie,s.filters.subMenuId]]):I("",!0)]),e("div",Wi,[e("span",zi,[t[36]||(t[36]=E("å·²é€‰ä¸­ ",-1)),e("strong",null,d(s.filteredCards.length),1),t[37]||(t[37]=E(" ä¸ªå¡ç‰‡",-1))]),e("button",{class:"btn sm",onClick:t[11]||(t[11]=(...n)=>u.applyFilter&&u.applyFilter(...n)),disabled:s.filtering},d(s.filtering?"ç­›é€‰ä¸­...":"ğŸ”„ åˆ·æ–°"),9,Ei)]),s.filteredCards.length?(a(),o("div",Ki,[(a(!0),o(R,null,F(s.filteredCards.slice(0,10),n=>(a(),o("div",{key:n.id,class:"card-preview-item"},[e("span",Ni,d(n.title||u.extractDomain(n.url)),1),e("span",Ri,d(n.url),1)]))),128)),s.filteredCards.length>10?(a(),o("div",Fi,"è¿˜æœ‰ "+d(s.filteredCards.length-10)+" ä¸ª...",1)):I("",!0)])):I("",!0)])):I("",!0),s.step===1?(a(),o("div",Oi,[e("div",Hi,[t[41]||(t[41]=e("h4",null,"ç”Ÿæˆå­—æ®µ",-1)),e("div",Gi,[e("label",null,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=n=>s.strategy.types=n),value:"name"},null,512),[[q,s.strategy.types]]),t[38]||(t[38]=E(" åç§°",-1))]),e("label",null,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=n=>s.strategy.types=n),value:"description"},null,512),[[q,s.strategy.types]]),t[39]||(t[39]=E(" æè¿°",-1))]),e("label",null,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=n=>s.strategy.types=n),value:"tags"},null,512),[[q,s.strategy.types]]),t[40]||(t[40]=E(" æ ‡ç­¾",-1))])])]),e("div",ji,[t[44]||(t[44]=e("h4",null,"ç”Ÿæˆæ¨¡å¼",-1)),e("div",qi,[e("label",null,[C(e("input",{type:"radio","onUpdate:modelValue":t[15]||(t[15]=n=>s.strategy.mode=n),value:"fill"},null,512),[[Ae,s.strategy.mode]]),t[42]||(t[42]=E(" è¡¥å…¨æ¨¡å¼ï¼ˆä»…å¡«å……ç©ºå­—æ®µï¼‰",-1))]),e("label",null,[C(e("input",{type:"radio","onUpdate:modelValue":t[16]||(t[16]=n=>s.strategy.mode=n),value:"overwrite"},null,512),[[Ae,s.strategy.mode]]),t[43]||(t[43]=E(" è¦†ç›–æ¨¡å¼ï¼ˆé‡æ–°ç”Ÿæˆæ‰€æœ‰ï¼‰",-1))])])]),e("div",Ji,[t[46]||(t[46]=e("h4",null,"ç”Ÿæˆé£æ ¼",-1)),C(e("select",{"onUpdate:modelValue":t[17]||(t[17]=n=>s.strategy.style=n),class:"input"},[...t[45]||(t[45]=[re('<option value="default" data-v-71c23159>é»˜è®¤</option><option value="concise" data-v-71c23159>ç®€æ´æœ‰åŠ›</option><option value="professional" data-v-71c23159>ä¸“ä¸šæ­£å¼</option><option value="friendly" data-v-71c23159>å‹å¥½è½»æ¾</option><option value="seo" data-v-71c23159>SEO ä¼˜åŒ–</option>',5)])],512),[[ie,s.strategy.style]])]),e("div",Qi,[t[47]||(t[47]=e("h4",null,"è‡ªå®šä¹‰æç¤ºï¼ˆå¯é€‰ï¼‰",-1)),C(e("textarea",{"onUpdate:modelValue":t[18]||(t[18]=n=>s.strategy.customPrompt=n),class:"input",rows:"2",placeholder:"ä¾‹å¦‚ï¼šè¯·ä½¿ç”¨ä¸­æ–‡ï¼Œæè¿°æ§åˆ¶åœ¨30å­—ä»¥å†…"},null,512),[[W,s.strategy.customPrompt]])])])):I("",!0),s.step===2?(a(),o("div",Xi,[e("div",Yi,[e("button",{class:"btn primary",onClick:t[19]||(t[19]=(...n)=>u.runPreview&&u.runPreview(...n)),disabled:s.previewing},d(s.previewing?"â³ ç”Ÿæˆé¢„è§ˆä¸­...":"ğŸ”® è¯•è¿è¡Œï¼ˆéšæœº3ä¸ªï¼‰"),9,Zi)]),s.previews.length?(a(),o("div",er,[(a(!0),o(R,null,F(s.previews,n=>(a(),o("div",{key:n.cardId,class:"preview-card"},[e("div",tr,d(n.title||u.extractDomain(n.url)),1),(a(!0),o(R,null,F(n.fields,(c,g)=>(a(),o("div",{key:g,class:"preview-field"},[e("span",sr,d(s.fieldLabels[g]),1),e("div",lr,[e("div",nr,d(c.original||"(ç©º)"),1),t[48]||(t[48]=e("div",{class:"diff-arrow"},"â†’",-1)),e("div",{class:K(["diff-new",{error:c.error}])},d(c.error||c.generated||"(ç©º)"),3)])]))),128))]))),128))])):s.previewing?I("",!0):(a(),o("div",ar,' ç‚¹å‡»"è¯•è¿è¡Œ"é¢„è§ˆ AI ç”Ÿæˆæ•ˆæœï¼Œä¸æ»¡æ„å¯è¿”å›è°ƒæ•´ç­–ç•¥ '))])):I("",!0),s.step===3?(a(),o("div",or,[!u.taskRunning&&!s.taskDone?(a(),o("div",ir,[e("p",null,[t[49]||(t[49]=E("å³å°†å¤„ç† ",-1)),e("strong",null,d(s.filteredCards.length),1),t[50]||(t[50]=E(" ä¸ªå¡ç‰‡",-1))]),e("p",null,"ç”Ÿæˆå­—æ®µï¼š"+d(s.strategy.types.map(n=>s.fieldLabels[n]).join("ã€")),1),e("p",null,"ç”Ÿæˆæ¨¡å¼ï¼š"+d(s.strategy.mode==="fill"?"è¡¥å…¨æ¨¡å¼":"è¦†ç›–æ¨¡å¼"),1),e("button",{class:"btn primary lg",onClick:t[20]||(t[20]=(...n)=>u.startTask&&u.startTask(...n)),disabled:s.starting},d(s.starting?"å¯åŠ¨ä¸­...":"ğŸš€ å¼€å§‹æ‰§è¡Œ"),9,rr)])):I("",!0),u.taskRunning||s.taskDone?(a(),o("div",dr,[e("div",ur,[e("span",null,d(s.taskDone?"âœ… ä»»åŠ¡å®Œæˆ":"â³ æ­£åœ¨å¤„ç†..."),1),e("span",null,d(u.taskStatus.current)+" / "+d(u.taskStatus.total),1)]),e("div",cr,[e("div",{class:"progress-fill",style:ce({width:u.progressPercent+"%"})},null,4)]),e("div",vr,[u.taskStatus.currentCard?(a(),o("span",pr,"å½“å‰ï¼š"+d(u.taskStatus.currentCard),1)):I("",!0),u.taskStatus.eta?(a(),o("span",mr,"é¢„è®¡å‰©ä½™ï¼š"+d(u.taskStatus.eta),1)):I("",!0)]),e("div",fr,[e("span",hr,"âœ“ æˆåŠŸ "+d(u.taskStatus.successCount||0),1),e("span",gr,"âœ— å¤±è´¥ "+d(u.taskStatus.failCount||0),1),s.taskDone&&u.taskStatus.failCount>0?(a(),o("button",{key:0,class:"btn sm outline retry-all-btn",onClick:t[21]||(t[21]=(...n)=>u.retryAllFailed&&u.retryAllFailed(...n)),disabled:s.starting}," ğŸ”„ é‡è¯•å…¨éƒ¨å¤±è´¥ ",8,br)):I("",!0)]),(P=u.taskStatus.errors)!=null&&P.length?(a(),o("div",kr,[e("div",yr,"å¤±è´¥åˆ—è¡¨ ("+d(u.taskStatus.errors.length)+")",1),e("div",wr,[(a(!0),o(R,null,F(u.taskStatus.errors,(n,c)=>(a(),o("div",{key:c,class:"error-item"},[e("div",_r,[e("span",{class:"error-title",title:n.cardTitle},d(n.cardTitle),9,Cr),e("span",{class:"error-msg",title:n.error},d(n.error),9,$r)]),e("button",{class:"btn xs outline retry-btn",onClick:g=>u.retryCard(n),disabled:s.starting||u.taskRunning},"é‡è¯•",8,Mr)]))),128))])])):I("",!0),u.taskRunning?(a(),o("div",xr,[e("button",{class:"btn danger",onClick:t[22]||(t[22]=(...n)=>u.stopTask&&u.stopTask(...n)),disabled:s.stopping},d(s.stopping?"åœæ­¢ä¸­...":"â¹ï¸ åœæ­¢ä»»åŠ¡"),9,Tr)])):I("",!0)])):I("",!0)])):I("",!0)]),e("div",Ur,[e("button",{class:"btn",onClick:t[23]||(t[23]=n=>i.$emit("close")),disabled:u.taskRunning},"å–æ¶ˆ",8,Sr),e("div",Vr,[s.step>0&&!u.taskRunning?(a(),o("button",{key:0,class:"btn",onClick:t[24]||(t[24]=n=>s.step--)},"ä¸Šä¸€æ­¥")):I("",!0),s.step<3?(a(),o("button",{key:1,class:"btn primary",onClick:t[25]||(t[25]=(...n)=>u.nextStep&&u.nextStep(...n)),disabled:!u.canNext},d(s.step===2?"ä¸‹ä¸€æ­¥ï¼šæ‰§è¡Œ":"ä¸‹ä¸€æ­¥"),9,Ar)):I("",!0),s.step===3&&s.taskDone?(a(),o("button",{key:2,class:"btn primary",onClick:t[26]||(t[26]=n=>i.$emit("close"))},"å®Œæˆ")):I("",!0)])])])])):I("",!0)}const Br=Y($i,[["render",Ir],["__scopeId","data-v-71c23159"]]),Ce={deepseek:{name:"DeepSeek",icon:"ğŸ³",recommended:!0,docsUrl:"https://platform.deepseek.com/",needsApiKey:!0,needsBaseUrl:!1,defaultModel:"deepseek-chat",models:["deepseek-chat","deepseek-reasoner"]},openai:{name:"OpenAI",icon:"ğŸ¤–",docsUrl:"https://platform.openai.com/",needsApiKey:!0,needsBaseUrl:!1,defaultModel:"gpt-4o-mini",models:["gpt-4o-mini","gpt-4o","gpt-3.5-turbo"]},gemini:{name:"Google Gemini",icon:"â™Š",docsUrl:"https://aistudio.google.com/",needsApiKey:!0,needsBaseUrl:!1,defaultModel:"gemini-1.5-flash",models:["gemini-1.5-flash","gemini-1.5-pro"]},anthropic:{name:"Anthropic",icon:"ğŸ¨",docsUrl:"https://console.anthropic.com/",needsApiKey:!0,needsBaseUrl:!1,defaultModel:"claude-3-haiku-20240307",models:["claude-3-5-sonnet-20240620","claude-3-haiku-20240307"]},zhipu:{name:"æ™ºè°± AI",icon:"ğŸ§ ",docsUrl:"https://open.bigmodel.cn/",needsApiKey:!0,needsBaseUrl:!1,defaultModel:"glm-4-flash",models:["glm-4-flash","glm-4"]},ollama:{name:"Ollama",icon:"ğŸ¦™",local:!0,docsUrl:"https://ollama.com/",needsApiKey:!1,needsBaseUrl:!0,defaultBaseUrl:"http://localhost:11434",defaultModel:"llama3",models:["llama3","qwen2","mistral"]},custom:{name:"è‡ªå®šä¹‰",icon:"ğŸ› ï¸",needsApiKey:!0,needsBaseUrl:!0,defaultModel:"",models:[]}},Dr={name:"AISettings",components:{AIBatchWizard:Br},data(){return{providers:Ce,config:{provider:"deepseek",apiKey:"",baseUrl:"",model:"deepseek-chat",autoGenerate:!1,hasApiKey:!1},modelSelect:"deepseek-chat",showApiKey:!1,testing:!1,saving:!1,refreshing:!1,starting:!1,stopping:!1,connectionTested:!1,connectionOk:!1,stats:null,task:{running:!1,type:"",mode:"",current:0,total:0,currentCard:"",startTime:0,errors:[],successCount:0,failCount:0},eventSource:null,toast:{show:!1,msg:"",type:"info"},showWizard:!1}},computed:{currentProvider(){return Ce[this.config.provider]||Ce.deepseek},canTest(){return!(this.currentProvider.needsApiKey&&!this.config.apiKey&&!this.config.hasApiKey||this.currentProvider.needsBaseUrl&&!this.config.baseUrl)},connectionStatus(){return!this.config.hasApiKey&&!this.config.apiKey?"none":this.connectionTested?this.connectionOk?"ok":"err":"pending"},statusText(){return{none:"æœªé…ç½®",ok:"å·²è¿æ¥",err:"è¿æ¥å¤±è´¥",pending:"å¾…æµ‹è¯•"}[this.connectionStatus]},totalMissing(){return this.stats?this.stats.emptyName+this.stats.emptyDesc+this.stats.emptyTags:0},taskPercent(){return this.task.total?Math.round(this.task.current/this.task.total*100):0},taskTitle(){const i={name:"åç§°",description:"æè¿°",tags:"æ ‡ç­¾"},t=this.task.types||[this.task.type];return Array.isArray(t)&&t.length>0?`æ­£åœ¨ç”Ÿæˆ${t.map(r=>i[r]||r).join("ã€")}`:"æ­£åœ¨ç”Ÿæˆå†…å®¹"},taskEta(){if(!this.task.startTime||this.task.current<2)return"";const t=(Date.now()-this.task.startTime)/this.task.current,r=(this.task.total-this.task.current)*t;return r<6e4?`${Math.round(r/1e3)}ç§’`:`${Math.round(r/6e4)}åˆ†é’Ÿ`},actionItems(){var i,t,r;return[{type:"name",label:"åç§°",icon:"ğŸ“",emptyCount:((i=this.stats)==null?void 0:i.emptyName)||0},{type:"description",label:"æè¿°",icon:"ğŸ“„",emptyCount:((t=this.stats)==null?void 0:t.emptyDesc)||0},{type:"tags",label:"æ ‡ç­¾",icon:"ğŸ·ï¸",emptyCount:((r=this.stats)==null?void 0:r.emptyTags)||0}]}},mounted(){return T(this,null,function*(){yield this.loadConfig(),yield this.refreshStats(),yield this.initRealtimeUpdates(),document.addEventListener("visibilitychange",this.handleVisibilityChange)})},beforeUnmount(){this.closeEventSource(),document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:{handleVisibilityChange(){document.visibilityState==="visible"&&(this.refreshStats(),this.eventSource||this.initRealtimeUpdates())},selectProvider(i){var t;this.config.provider=i,this.config.model=this.currentProvider.defaultModel,this.modelSelect=(t=this.currentProvider.models)!=null&&t.includes(this.config.model)?this.config.model:"",this.config.baseUrl=this.currentProvider.defaultBaseUrl||"",this.config.apiKey="",this.config.hasApiKey=!1,this.connectionTested=!1},onModelChange(){this.modelSelect&&(this.config.model=this.modelSelect)},loadConfig(){return T(this,null,function*(){var i;try{const{data:t}=yield Mt();if(t.success){const r=t.config;this.config.provider=r.provider||"deepseek",this.config.hasApiKey=r.hasApiKey,this.config.baseUrl=r.baseUrl||"",this.config.model=r.model||this.currentProvider.defaultModel,this.modelSelect=(i=this.currentProvider.models)!=null&&i.includes(this.config.model)?this.config.model:"",this.config.autoGenerate=r.autoGenerate||!1,r.lastTestedOk?(this.connectionTested=!0,this.connectionOk=!0):r.hasApiKey&&(this.connectionTested=!1,this.connectionOk=!1)}}catch(t){}})},saveConfig(){return T(this,null,function*(){var i,t;this.saving=!0;try{const{data:r}=yield $t({provider:this.config.provider,apiKey:this.config.apiKey||void 0,baseUrl:this.config.baseUrl||this.currentProvider.defaultBaseUrl,model:this.config.model,autoGenerate:this.config.autoGenerate});r.success?(this.showToast("é…ç½®å·²ä¿å­˜","success"),this.config.hasApiKey=!0,this.config.apiKey="",this.testConnection()):this.showToast(r.message,"error")}catch(r){this.showToast(((t=(i=r.response)==null?void 0:i.data)==null?void 0:t.message)||"ä¿å­˜å¤±è´¥","error")}this.saving=!1})},testConnection(){return T(this,null,function*(){this.testing=!0;try{const{data:i}=yield Ct();this.connectionTested=!0,this.connectionOk=i.success,this.showToast(i.success?"è¿æ¥æˆåŠŸ":i.message,i.success?"success":"error")}catch(i){this.connectionTested=!0,this.connectionOk=!1,this.showToast("è¿æ¥å¤±è´¥","error")}this.testing=!1})},refreshStats(){return T(this,null,function*(){this.refreshing=!0;try{const{data:i}=yield _t();i.success&&(this.stats=i.stats)}catch(i){console.error("Failed to refresh stats:",i)}this.refreshing=!1})},initRealtimeUpdates(){return T(this,null,function*(){this.closeEventSource();const i=localStorage.getItem("token"),t=`/api/ai/batch-task/stream${i?"?token="+encodeURIComponent(i):""}`;this.eventSource=new EventSource(t),this.eventSource.onmessage=r=>{try{const M=JSON.parse(r.data);this.updateTaskState(M)}catch(M){console.error("Failed to parse SSE data:",M)}},this.eventSource.onerror=r=>{console.warn("SSE connection error, falling back to polling...",r),this.closeEventSource()}})},closeEventSource(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)},updateTaskState(i){if(i){if(this.task.running&&!i.running){this.task.current=this.task.total,this.task.total>0&&i.successCount!==void 0&&this.showToast(`ä»»åŠ¡ç»“æŸï¼æˆåŠŸ ${i.successCount||0}ï¼Œå¤±è´¥ ${i.failCount||0}`,i.failCount>0?"info":"success"),this.refreshStats(),this.task=ae(Q(Q({},this.task),i),{running:!0}),setTimeout(()=>{this.task.running=!1,this.refreshStats()},2e3);return}if(i.running||this.task.running){const t=this.task.running&&!i.running;this.task=ae(Q(Q({},this.task),i),{running:t?!0:!!i.running,startTime:i.startTime||this.task.startTime||Date.now()})}else this.task=ae(Q(Q({},this.task),i),{running:!1})}},startTask(i,t){return T(this,null,function*(){var r,M;if(!(this.starting||this.task.running)&&!(t==="all"&&!confirm(`ç¡®å®šè¦é‡æ–°ç”Ÿæˆæ‰€æœ‰å¡ç‰‡çš„${i==="name"?"åç§°":i==="description"?"æè¿°":"æ ‡ç­¾"}å—ï¼Ÿ`))){this.starting=!0;try{this.task={running:!0,type:i,mode:t,current:0,total:0,successCount:0,failCount:0,currentCard:"å‡†å¤‡ä¸­...",startTime:Date.now(),errors:[],types:i==="all"?["name","description","tags"]:[i]};const{data:s}=yield Me({type:i,mode:t});if(!s.success){this.showToast(s.message||"å¯åŠ¨å¤±è´¥","error"),this.task.running=!1;return}if(s.total===0){this.showToast("æ²¡æœ‰éœ€è¦å¤„ç†çš„å¡ç‰‡","info"),this.task.running=!1,this.refreshStats();return}this.task.total=s.total,this.showToast(`ä»»åŠ¡å·²å¯åŠ¨ï¼Œæ­£åœ¨å¤„ç† ${s.total} ä¸ªå¡ç‰‡`,"success"),this.initRealtimeUpdates()}catch(s){this.showToast(((M=(r=s.response)==null?void 0:r.data)==null?void 0:M.message)||"å¯åŠ¨å¤±è´¥","error"),this.task.running=!1}finally{this.starting=!1}}})},stopTask(){return T(this,null,function*(){this.stopping=!0;try{yield We(),this.showToast("æ­£åœ¨åœæ­¢...","info"),this.refreshStats()}catch(i){}setTimeout(()=>{this.stopping=!1},2e3)})},retryCard(i){return T(this,null,function*(){i.cardId&&(yield this.doStartBatchTask([i.cardId],this.task.types||["name","description","tags"]))})},retryAllFailed(){return T(this,null,function*(){const i=this.task.errors.map(t=>t.cardId).filter(t=>!!t);i.length!==0&&(yield this.doStartBatchTask(i,this.task.types||["name","description","tags"]))})},doStartBatchTask(i,t){return T(this,null,function*(){var r,M;if(!(this.starting||this.task.running)){this.starting=!0;try{this.task={running:!0,current:0,total:i.length,successCount:0,failCount:0,currentCard:"å‡†å¤‡ä¸­...",startTime:Date.now(),errors:[],types:t};const{data:s}=yield Me({cardIds:i,types:t});if(!s.success){this.showToast(s.message||"å¯åŠ¨å¤±è´¥","error"),this.task.running=!1;return}this.showToast("é‡è¯•ä»»åŠ¡å·²å¯åŠ¨","success"),this.initRealtimeUpdates()}catch(s){this.showToast(((M=(r=s.response)==null?void 0:r.data)==null?void 0:M.message)||"å¯åŠ¨å¤±è´¥","error"),this.task.running=!1}finally{this.starting=!1}}})},showToast(i,t="info"){this.toast={show:!0,msg:i,type:t},setTimeout(()=>{this.toast.show=!1},3e3)},onWizardClose(){this.showWizard=!1,this.refreshStats(),this.task.running||this.initRealtimeUpdates()},onWizardStart(i){this.task=ae(Q(Q({},this.task),i),{running:!0,startTime:Date.now()}),this.initRealtimeUpdates()}}},Pr={class:"ai-settings"},Lr={class:"page-header"},Wr={key:0,class:"quick-start"},zr={class:"section"},Er={class:"provider-grid"},Kr=["onClick"],Nr={class:"provider-icon"},Rr={class:"provider-info"},Fr={class:"provider-name"},Or={key:0,class:"provider-tag"},Hr={key:1,class:"provider-tag local"},Gr={class:"section"},jr={class:"section-header"},qr=["href"],Jr={class:"config-form"},Qr={key:0,class:"form-item"},Xr={class:"input-group"},Yr=["type","placeholder"],Zr={key:1,class:"form-item"},ed=["placeholder"],td={class:"form-item"},sd={class:"model-select"},ld=["value"],nd=["placeholder"],ad={class:"form-item switch-item"},od={class:"switch"},id={class:"form-actions"},rd=["disabled"],dd=["disabled"],ud={class:"section"},cd={class:"section-header"},vd=["disabled"],pd={key:0,class:"stats"},md={class:"stat"},fd={key:1,class:"task-panel"},hd={class:"task-header"},gd={class:"task-title"},bd={class:"task-counts"},kd={class:"count-item success"},yd={key:0,class:"count-item fail"},wd={class:"count-item total"},_d={class:"progress-wrap"},Cd={class:"progress-bar"},$d={class:"progress-text"},Md={class:"task-info"},xd=["title"],Td={key:1,class:"task-eta"},Ud={key:0,class:"task-errors"},Sd={class:"error-header"},Vd=["disabled"],Ad={class:"error-list"},Id={class:"err-info"},Bd=["title"],Dd=["title"],Pd=["onClick","disabled"],Ld={class:"task-actions"},Wd={key:0,class:"task-concurrency"},zd={key:0,class:"rate-limit-tag"},Ed=["disabled"],Kd={key:2,class:"batch-actions"},Nd={class:"action-bar"},Rd=["disabled"],Fd=["disabled"],Od={key:0,class:"action-hint"};function Hd(i,t,r,M,s,u){const P=Ge("AIBatchWizard");return a(),o("div",Pr,[e("div",Lr,[t[15]||(t[15]=e("h2",null,"ğŸ¤– AI æ™ºèƒ½ç”Ÿæˆ",-1)),e("div",{class:K(["connection-status",u.connectionStatus])},[t[14]||(t[14]=e("span",{class:"status-dot"},null,-1)),e("span",null,d(u.statusText),1)],2)]),!s.config.hasApiKey&&!s.config.apiKey?(a(),o("div",Wr,[...t[16]||(t[16]=[re('<div class="quick-start-icon" data-v-4c87725c>ğŸš€</div><div class="quick-start-content" data-v-4c87725c><h4 data-v-4c87725c>å¿«é€Ÿå¼€å§‹</h4><p data-v-4c87725c>é…ç½® AI æœåŠ¡åï¼Œå¯è‡ªåŠ¨ä¸ºå¡ç‰‡ç”Ÿæˆåç§°ã€æè¿°å’Œæ ‡ç­¾</p><div class="quick-start-steps" data-v-4c87725c><span class="step" data-v-4c87725c>1. é€‰æ‹©æä¾›å•†</span><span class="step" data-v-4c87725c>2. å¡«å†™ API Key</span><span class="step" data-v-4c87725c>3. æµ‹è¯•è¿æ¥</span></div></div>',2)])])):I("",!0),e("div",zr,[t[17]||(t[17]=e("div",{class:"section-header"},[e("h3",null,"é€‰æ‹© AI æä¾›å•†"),e("span",{class:"section-hint"},"æ¨èä½¿ç”¨ DeepSeekï¼Œæ€§ä»·æ¯”é«˜")],-1)),e("div",Er,[(a(!0),o(R,null,F(s.providers,(n,c)=>(a(),o("div",{key:c,class:K(["provider-card",{active:s.config.provider===c}]),onClick:g=>u.selectProvider(c)},[e("div",Nr,d(n.icon),1),e("div",Rr,[e("span",Fr,d(n.name),1),n.recommended?(a(),o("span",Or,"æ¨è")):I("",!0),n.local?(a(),o("span",Hr,"æœ¬åœ°")):I("",!0)])],10,Kr))),128))])]),e("div",Gr,[e("div",jr,[t[18]||(t[18]=e("h3",null,"API é…ç½®",-1)),u.currentProvider.docsUrl?(a(),o("a",{key:0,href:u.currentProvider.docsUrl,target:"_blank",class:"docs-link"}," ğŸ“– è·å– API Key ",8,qr)):I("",!0)]),e("div",Jr,[u.currentProvider.needsApiKey?(a(),o("div",Qr,[e("label",null,[t[19]||(t[19]=e("span",null,"API Key",-1)),e("span",{class:K(["label-status",{ok:s.config.hasApiKey}])},d(s.config.hasApiKey?"âœ“ å·²é…ç½®":"æœªé…ç½®"),3)]),e("div",Xr,[C(e("input",{type:s.showApiKey?"text":"password","onUpdate:modelValue":t[0]||(t[0]=n=>s.config.apiKey=n),placeholder:s.config.hasApiKey?"å·²é…ç½®ï¼ˆç•™ç©ºä¿æŒä¸å˜ï¼‰":"è¯·è¾“å…¥ API Key",class:"input"},null,8,Yr),[[Le,s.config.apiKey]]),e("button",{type:"button",class:"input-btn",onClick:t[1]||(t[1]=n=>s.showApiKey=!s.showApiKey)},d(s.showApiKey?"ğŸ™ˆ":"ğŸ‘ï¸"),1)])])):I("",!0),u.currentProvider.needsBaseUrl?(a(),o("div",Zr,[t[20]||(t[20]=e("label",null,"Base URL",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>s.config.baseUrl=n),placeholder:u.currentProvider.defaultBaseUrl,class:"input"},null,8,ed),[[W,s.config.baseUrl]])])):I("",!0),e("div",td,[t[22]||(t[22]=e("label",null,"æ¨¡å‹",-1)),e("div",sd,[C(e("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>s.modelSelect=n),class:"input",onChange:t[4]||(t[4]=(...n)=>u.onModelChange&&u.onModelChange(...n))},[t[21]||(t[21]=e("option",{value:""},"è‡ªå®šä¹‰æ¨¡å‹",-1)),(a(!0),o(R,null,F(u.currentProvider.models,n=>(a(),o("option",{key:n,value:n},d(n),9,ld))),128))],544),[[ie,s.modelSelect]]),s.modelSelect===""?C((a(),o("input",{key:0,type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>s.config.model=n),placeholder:u.currentProvider.defaultModel||"è¾“å…¥æ¨¡å‹åç§°",class:"input"},null,8,nd)),[[W,s.config.model]]):I("",!0)])]),e("div",ad,[t[24]||(t[24]=e("span",null,[e("strong",null,"è‡ªåŠ¨ç”Ÿæˆ"),e("small",null,"æ·»åŠ å¡ç‰‡æ—¶è‡ªåŠ¨ç”Ÿæˆåç§°ã€æè¿°å’Œæ ‡ç­¾")],-1)),e("label",od,[C(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=n=>s.config.autoGenerate=n)},null,512),[[q,s.config.autoGenerate]]),t[23]||(t[23]=e("span",{class:"slider"},null,-1))])]),e("div",id,[e("button",{class:"btn",onClick:t[7]||(t[7]=(...n)=>u.testConnection&&u.testConnection(...n)),disabled:s.testing||!u.canTest},d(s.testing?"â³ æµ‹è¯•ä¸­...":"ğŸ”— æµ‹è¯•è¿æ¥"),9,rd),e("button",{class:"btn primary",onClick:t[8]||(t[8]=(...n)=>u.saveConfig&&u.saveConfig(...n)),disabled:s.saving},d(s.saving?"â³ ä¿å­˜ä¸­...":"ğŸ’¾ ä¿å­˜é…ç½®"),9,dd)])])]),e("div",ud,[e("div",cd,[t[25]||(t[25]=e("h3",null,"æ‰¹é‡ç”Ÿæˆ",-1)),e("button",{class:"icon-btn",onClick:t[9]||(t[9]=(...n)=>u.refreshStats&&u.refreshStats(...n)),disabled:s.refreshing},d(s.refreshing?"â³":"ğŸ”„"),9,vd)]),s.stats?(a(),o("div",pd,[e("div",md,[e("span",null,d(s.stats.total),1),t[26]||(t[26]=E("æ€»æ•°",-1))]),e("div",{class:K(["stat",{warn:s.stats.emptyName}])},[e("span",null,d(s.stats.emptyName),1),t[27]||(t[27]=E("ç¼ºåç§°",-1))],2),e("div",{class:K(["stat",{warn:s.stats.emptyDesc}])},[e("span",null,d(s.stats.emptyDesc),1),t[28]||(t[28]=E("ç¼ºæè¿°",-1))],2),e("div",{class:K(["stat",{warn:s.stats.emptyTags}])},[e("span",null,d(s.stats.emptyTags),1),t[29]||(t[29]=E("ç¼ºæ ‡ç­¾",-1))],2)])):I("",!0),s.task.running&&!s.showWizard?(a(),o("div",fd,[e("div",hd,[e("span",gd,d(u.taskTitle),1),e("div",bd,[e("span",kd,"æˆåŠŸ: "+d(s.task.successCount||0),1),s.task.failCount?(a(),o("span",yd,"å¤±è´¥: "+d(s.task.failCount),1)):I("",!0),e("span",wd,d(s.task.current)+" / "+d(s.task.total),1)])]),e("div",_d,[e("div",Cd,[e("div",{class:"progress-fill",style:ce({width:u.taskPercent+"%"})},null,4)]),e("span",$d,d(u.taskPercent)+"%",1)]),e("div",Md,[s.task.currentCard?(a(),o("span",{key:0,class:"task-current",title:s.task.currentCard},"æ­£åœ¨å¤„ç†: "+d(s.task.currentCard),9,xd)):I("",!0),u.taskEta?(a(),o("span",Td,"å‰©ä½™çº¦ "+d(u.taskEta),1)):I("",!0)]),s.task.errors&&s.task.errors.length>0?(a(),o("div",Ud,[e("div",Sd,[e("span",null,"å¤±è´¥åˆ—è¡¨ ("+d(s.task.errors.length)+")",1),!s.task.running&&s.task.failCount>0?(a(),o("button",{key:0,class:"btn xs outline retry-all-btn",onClick:t[10]||(t[10]=(...n)=>u.retryAllFailed&&u.retryAllFailed(...n)),disabled:s.starting}," ğŸ”„ é‡è¯•å…¨éƒ¨å¤±è´¥ ",8,Vd)):I("",!0)]),e("div",Ad,[(a(!0),o(R,null,F(s.task.errors,(n,c)=>(a(),o("div",{key:c,class:"error-item"},[e("div",Id,[e("span",{class:"err-title",title:n.cardTitle},d(n.cardTitle)+":",9,Bd),e("span",{class:"err-msg",title:n.error},d(n.error),9,Dd)]),e("button",{class:"btn xs outline",onClick:g=>u.retryCard(n),disabled:s.starting||s.task.running},"é‡è¯•",8,Pd)]))),128))])])):I("",!0),e("div",Ld,[s.task.concurrency?(a(),o("div",Wd,[E(" å¹¶å‘æ•°: "+d(s.task.concurrency)+" ",1),s.task.isRateLimited?(a(),o("span",zd,"é™æµä¸­")):I("",!0)])):I("",!0),e("button",{class:"btn danger sm",onClick:t[11]||(t[11]=(...n)=>u.stopTask&&u.stopTask(...n)),disabled:s.stopping},d(s.stopping?"åœæ­¢ä¸­...":"â¹ï¸ åœæ­¢ä»»åŠ¡"),9,Ed)])])):(a(),o("div",Kd,[e("div",Nd,[e("button",{class:"btn primary lg main-action",onClick:t[12]||(t[12]=n=>u.startTask("all","empty")),disabled:!s.config.hasApiKey||s.starting||u.totalMissing===0}," âœ¨ æ™ºèƒ½è¡¥å…¨ç¼ºå¤±å†…å®¹ ("+d(u.totalMissing)+") ",9,Rd),e("button",{class:"btn lg outline wizard-action",onClick:t[13]||(t[13]=n=>s.showWizard=!0),disabled:!s.config.hasApiKey}," ğŸ¯ é«˜çº§æ‰¹é‡ç”Ÿæˆå‘å¯¼ ",8,Fd)]),u.totalMissing>0?(a(),o("p",Od," è¡¥å…¨å°†è‡ªåŠ¨åˆ†æ URL å¹¶ç”Ÿæˆç¼ºå¤±çš„åç§°ã€æè¿°å’Œæ ‡ç­¾ã€‚ ")):I("",!0)]))]),Pe(P,{visible:s.showWizard,"active-task":s.task,onClose:u.onWizardClose,onStart:u.onWizardStart},null,8,["visible","active-task","onClose","onStart"]),e("div",{class:K(["toast",[s.toast.type,{show:s.toast.show}]])},d(s.toast.msg),3)])}const Gd=Y(Dr,[["render",Hd],["__scopeId","data-v-4c87725c"]]),jd={key:0,class:"login-container"},qd={class:"login-card"},Jd={class:"login-form"},Qd={class:"password-input-wrapper"},Xd=["type"],Yd={key:0,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Zd={key:1,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},eu={class:"login-buttons"},tu=["disabled"],su={key:0,class:"login-error"},lu={key:1,class:"admin-layout"},nu={class:"menu-list"},au={class:"admin-main"},ou={class:"admin-header"},iu={class:"header-title"},ru={class:"admin-content"},De=1800*1e3,du={__name:"Admin",setup(i){const t=$("welcome");let r=null,M=Date.now();function s(){M=Date.now(),localStorage.setItem("lastActivityTime",M.toString()),r&&clearTimeout(r),v.value&&(r=setTimeout(()=>{u()},De))}function u(){v.value&&(alert("ç”±äºé•¿æ—¶é—´æœªæ“ä½œï¼Œå·²è‡ªåŠ¨é€€å‡ºç™»å½•"),N())}function P(){const D=localStorage.getItem("lastActivityTime");return D&&Date.now()-parseInt(D)>=De?(localStorage.removeItem("token"),localStorage.removeItem("lastActivityTime"),!0):!1}const n=["mousedown","mousemove","keydown","scroll","touchstart","click"];function c(){n.forEach(D=>{document.addEventListener(D,s,{passive:!0})})}function g(){n.forEach(D=>{document.removeEventListener(D,s)})}je(()=>{r&&clearTimeout(r),g()});const _={welcome:Pt,menu:Us,card:ml,duplicate:Xl,tag:hn,promo:jn,friend:la,user:wa,backup:Ci,ai:Gd},k=de(()=>_[t.value]),S=de(()=>t.value==="welcome"?{lastLoginTime:b.value,lastLoginIp:m.value,currentUsername:f.value}:{}),b=$(""),m=$(""),f=$("admin"),v=$(!1),A=$(""),U=$(""),V=$(!1),H=$(""),X=$(!1),ee=$(!1),te=de(()=>{switch(t.value){case"menu":return"æ ç›®ç®¡ç†";case"card":return"å¡ç‰‡ç®¡ç†";case"duplicate":return"å»é‡ç®¡ç†";case"tag":return"æ ‡ç­¾ç®¡ç†";case"promo":return"å®£ä¼ ç®¡ç†";case"friend":return"å‹é“¾ç®¡ç†";case"user":return"ç”¨æˆ·ç®¡ç†";case"backup":return"å¤‡ä»½ç®¡ç†";case"ai":return"AI è®¾ç½®";default:return""}});ne(()=>T(null,null,function*(){if(P()){v.value=!1;return}localStorage.getItem("token")?(v.value=!0,yield le(),v.value&&(s(),c())):v.value=!1}));function le(){return T(this,null,function*(){try{const D=yield fetch("/api/users/me",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(D.ok){const h=yield D.json();b.value=h.last_login_time||"",m.value=h.last_login_ip||"",f.value=h.username||"admin"}else D.status===401&&(console.warn("TokenéªŒè¯å¤±è´¥ï¼Œè‡ªåŠ¨é€€å‡ºç™»å½•"),N())}catch(D){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",D)}})}function se(){return T(this,null,function*(){var D,h;if(!A.value||!U.value){H.value="è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";return}V.value=!0,H.value="";try{const p=yield xt(A.value,U.value);p.data.token&&(localStorage.setItem("token",p.data.token),v.value=!0,b.value=p.data.lastLoginTime||"",m.value=p.data.lastLoginIp||"",yield le(),s(),c())}catch(p){H.value=((h=(D=p.response)==null?void 0:D.data)==null?void 0:h.message)||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "}finally{V.value=!1}})}function N(){r&&(clearTimeout(r),r=null),g(),localStorage.removeItem("token"),localStorage.removeItem("lastActivityTime"),v.value=!1,A.value="",U.value="",H.value=""}function z(){window.open("/","_blank")}function w(){ee.value=!ee.value}function B(){ee.value=!1}return(D,h)=>v.value?(a(),o("div",lu,[e("aside",{class:K(["admin-sider",{open:ee.value}]),onClick:ye(B,["self"])},[e("div",{class:"logo clickable",onClick:h[3]||(h[3]=p=>{t.value="welcome",B()})},"Admin"),e("ul",nu,[e("li",{class:K({active:t.value==="menu"}),onClick:h[4]||(h[4]=p=>{t.value="menu",B()})},"æ ç›®ç®¡ç†",2),e("li",{class:K({active:t.value==="card"}),onClick:h[5]||(h[5]=p=>{t.value="card",B()})},"å¡ç‰‡ç®¡ç†",2),e("li",{class:K({active:t.value==="duplicate"}),onClick:h[6]||(h[6]=p=>{t.value="duplicate",B()})},"å»é‡ç®¡ç†",2),e("li",{class:K({active:t.value==="tag"}),onClick:h[7]||(h[7]=p=>{t.value="tag",B()})},"æ ‡ç­¾ç®¡ç†",2),e("li",{class:K({active:t.value==="promo"}),onClick:h[8]||(h[8]=p=>{t.value="promo",B()})},"å®£ä¼ ç®¡ç†",2),e("li",{class:K({active:t.value==="friend"}),onClick:h[9]||(h[9]=p=>{t.value="friend",B()})},"å‹é“¾ç®¡ç†",2),e("li",{class:K({active:t.value==="user"}),onClick:h[10]||(h[10]=p=>{t.value="user",B()})},"ç”¨æˆ·ç®¡ç†",2),e("li",{class:K({active:t.value==="backup"}),onClick:h[11]||(h[11]=p=>{t.value="backup",B()})},"å¤‡ä»½ç®¡ç†",2),e("li",{class:K({active:t.value==="ai"}),onClick:h[12]||(h[12]=p=>{t.value="ai",B()})},"AI è®¾ç½®",2)])],2),e("main",au,[e("div",ou,[e("button",{class:"menu-toggle",onClick:w}," â˜° "),e("div",iu,d(te.value),1),e("div",{class:"header-actions"},[e("span",{class:"home-icon",onClick:z,title:"è¿›å…¥ä¸»é¡µ"},[...h[17]||(h[17]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M3 10.5L12 4l9 6.5V20a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4h-4v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V10.5z",stroke:"#2566d8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),e("button",{class:"btn logout-btn",onClick:N},"é€€å‡ºç™»å½•")])]),e("div",ru,[Pe(Je,{name:"fade",mode:"out-in"},{default:qe(()=>[(a(),Qe(Xe(k.value),Ye({key:t.value},S.value),null,16))]),_:1})]),h[18]||(h[18]=e("footer",{class:"admin-footer"},[e("p",{class:"admin-copyright"},[E("Copyright Â© 2025 Con-Nav-Item | "),e("a",{href:"https://github.com/zczy-k/Con-Nav-Item",target:"_blank",class:"footer-link"},"Powered by zczy-k")])],-1))])])):(a(),o("div",jd,[e("div",qd,[h[16]||(h[16]=e("h2",{class:"login-title"},"åå°ç®¡ç†ç™»å½•",-1)),e("div",Jd,[C(e("input",{"onUpdate:modelValue":h[0]||(h[0]=p=>A.value=p),type:"text",placeholder:"ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šadminï¼‰",class:"login-input",onKeyup:$e(se,["enter"])},null,544),[[W,A.value]]),e("div",Qd,[C(e("input",{"onUpdate:modelValue":h[1]||(h[1]=p=>U.value=p),type:X.value?"text":"password",placeholder:"å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰",class:"login-input password-input",onKeyup:$e(se,["enter"])},null,40,Xd),[[Le,U.value]]),e("span",{class:"toggle-password",onClick:h[2]||(h[2]=p=>X.value=!X.value)},[X.value?(a(),o("svg",Yd,[...h[13]||(h[13]=[e("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)])])):(a(),o("svg",Zd,[...h[14]||(h[14]=[e("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.77 21.77 0 0 1 5.06-6.06"},null,-1),e("path",{d:"M1 1l22 22"},null,-1),e("path",{d:"M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"},null,-1)])]))])]),e("div",eu,[e("button",{onClick:z,class:"back-btn"},[...h[15]||(h[15]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),E(" è¿”å›é¦–é¡µ ",-1)])]),e("button",{onClick:se,class:"login-btn",disabled:V.value},d(V.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,tu)]),H.value?(a(),o("p",su,d(H.value),1)):I("",!0)])])]))}},pu=Y(du,[["__scopeId","data-v-52d75759"]]);export{pu as default};
